function printStackTrace(a){var a=a||{guess:!0},b=a.e||null,a=!!a.guess,c=new printStackTrace.implementation,b=c.run(b);return a?c.guessAnonymousFunctions(b).join(";   "):b.join(";   ")}printStackTrace.implementation=function(){};
printStackTrace.implementation.prototype={run:function(a,b){a=a||this.createException();b=b||this.mode(a);return"other"===b?this.other(arguments.callee):this[b](a)},createException:function(){try{this.undef()}catch(a){return a}},mode:function(a){return a.arguments&&a.stack?"chrome":"string"===typeof a.message&&"undefined"!==typeof window&&window.opera?!a.stacktrace||-1<a.message.indexOf("\n")&&a.message.split("\n").length>a.stacktrace.split("\n").length?"opera9":!a.stack?"opera10a":0>a.stacktrace.indexOf("called from line")?
"opera10b":"opera11":a.stack?"firefox":"other"},instrumentFunction:function(a,b,c){var a=a||window,d=a[b];a[b]=function(){c.call(this,printStackTrace().slice(4));return a[b]._instrumented.apply(this,arguments)};a[b]._instrumented=d},deinstrumentFunction:function(a,b){a[b].constructor===Function&&a[b]._instrumented&&a[b]._instrumented.constructor===Function&&(a[b]=a[b]._instrumented)},chrome:function(a){a=(a.stack+"\n").replace(/^\S[^\(]+?[\n$]/gm,"").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,
"{anonymous}()@$1$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}()@$1").split("\n");a.pop();return a},firefox:function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n")},opera11:function(a){for(var b=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/,a=a.stacktrace.split("\n"),c=[],d=0,g=a.length;d<g;d+=2){var e=b.exec(a[d]);if(e){var h=e[4]+":"+e[1]+":"+e[2],e=e[3]||"global code",e=e.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,
"{anonymous}");c.push(e+"@"+h+" -- "+a[d+1].replace(/^\s+/,""))}}return c},opera10b:function(a){for(var b=/^(.*)@(.+):(\d+)$/,a=a.stacktrace.split("\n"),c=[],d=0,g=a.length;d<g;d++){var e=b.exec(a[d]);e&&c.push((e[1]?e[1]+"()":"global code")+"@"+e[2]+":"+e[3])}return c},opera10a:function(a){for(var b=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,a=a.stacktrace.split("\n"),c=[],d=0,g=a.length;d<g;d+=2){var e=b.exec(a[d]);e&&c.push((e[3]||"{anonymous}")+"()@"+e[2]+":"+e[1]+" -- "+a[d+
1].replace(/^\s+/,""))}return c},opera9:function(a){for(var b=/Line (\d+).*script (?:in )?(\S+)/i,a=a.message.split("\n"),c=[],d=2,g=a.length;d<g;d+=2){var e=b.exec(a[d]);e&&c.push("{anonymous}()@"+e[2]+":"+e[1]+" -- "+a[d+1].replace(/^\s+/,""))}return c},other:function(a){for(var b=/function\s*([\w\-$]+)?\s*\(/i,c=[],d,g;a&&a.arguments&&10>c.length;)d=b.test(a.toString())?RegExp.$1||"{anonymous}":"{anonymous}",g=Array.prototype.slice.call(a.arguments||[]),c[c.length]=d+"("+this.stringifyArguments(g)+
")",a=a.caller;return c},stringifyArguments:function(a){for(var b=[],c=Array.prototype.slice,d=0;d<a.length;++d){var g=a[d];void 0===g?b[d]="undefined":null===g?b[d]="null":g.constructor&&(g.constructor===Array?b[d]=3>g.length?"["+this.stringifyArguments(g)+"]":"["+this.stringifyArguments(c.call(g,0,1))+"..."+this.stringifyArguments(c.call(g,-1))+"]":g.constructor===Object?b[d]="#object":g.constructor===Function?b[d]="#function":g.constructor===String?b[d]='"'+g+'"':g.constructor===Number&&(b[d]=
g))}return b.join(",")},sourceCache:{},ajax:function(a){var b=this.createXMLHTTPObject();if(b)try{return b.open("GET",a,!1),b.send(null),b.responseText}catch(c){}return""},createXMLHTTPObject:function(){for(var a,b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0;c<b.length;c++)try{return a=b[c](),this.createXMLHTTPObject=b[c],a}catch(d){}},
isSameDomain:function(a){return"undefined"!==typeof location&&-1!==a.indexOf(location.hostname)},getSource:function(a){a in this.sourceCache||(this.sourceCache[a]=this.ajax(a).split("\n"));return this.sourceCache[a]},guessAnonymousFunctions:function(a){for(var b=0;b<a.length;++b){var c=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,d=a[b],g=/\{anonymous\}\(.*\)@(.*)/.exec(d);if(g){var e=c.exec(g[1]);e&&(c=e[1],g=e[2],e=e[3]||0,c&&this.isSameDomain(c)&&g&&(c=this.guessAnonymousFunction(c,g,e),a[b]=d.replace("{anonymous}",
c)))}}return a},guessAnonymousFunction:function(a,b){var c;try{c=this.findFunctionName(this.getSource(a),b)}catch(d){c="getSource failed with url: "+a+", exception: "+d.toString()}return c},findFunctionName:function(a,b){for(var c=/function\s+([^(]*?)\s*\(([^)]*)\)/,d=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*function\b/,g=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*(?:eval|new Function)\b/,e="",h,l=Math.min(b,20),m,p=0;p<l;++p)if(h=a[b-p-1],m=h.indexOf("//"),0<=m&&(h=h.substr(0,m)),h)if(e=h+e,(h=d.exec(e))&&h[1]||
(h=c.exec(e))&&h[1]||(h=g.exec(e))&&h[1])return h[1];return"(?)"}};if("undefined"===typeof PhoneGap){if("object"!==typeof DeviceInfo)var DeviceInfo={};var PhoneGap={queue:{ready:!0,commands:[],timer:null},documentEventHandler:{},windowEventHandler:{},resources:{base:!0},hasResource:function(a){return PhoneGap.resources[a]},addResource:function(a){PhoneGap.resources[a]=!0},Channel:function(a){this.type=a;this.handlers={};this.guid=0;this.fired=!1;this.enabled=!0}};PhoneGap.Channel.prototype.subscribe=function(a,b,c){if(null!==a){var d=a;"object"===typeof b&&"function"===
typeof a&&(d=PhoneGap.close(b,a));c=c||d.observer_guid||a.observer_guid||this.guid++;d.observer_guid=c;a.observer_guid=c;this.handlers[c]=d;return c}};PhoneGap.Channel.prototype.subscribeOnce=function(a,b){var c=null,d=this,g=function(){a.apply(b||null,arguments);d.unsubscribe(c)};this.fired?("object"===typeof b&&"function"===typeof a&&(a=PhoneGap.close(b,a)),a.apply(this,this.fireArgs)):c=this.subscribe(g);return c};PhoneGap.Channel.prototype.unsubscribe=function(a){"function"===typeof a&&(a=a.observer_guid);
this.handlers[a]=null;delete this.handlers[a]};PhoneGap.Channel.prototype.fire=function(a){if(this.enabled){var b=!1,c,d;for(c in this.handlers)this.handlers.hasOwnProperty(c)&&(d=this.handlers[c],"function"===typeof d&&(d=!1===d.apply(this,arguments),b=b||d));this.fired=!0;this.fireArgs=arguments;return!b}return!0};PhoneGap.Channel.join=function(a,b){var c=b.length,d=function(){--c||a()},g=c,e;for(e=0;e<g;e++)b[e].fired?c--:b[e].subscribeOnce(d);c||a()};PhoneGap.available=void 0!==DeviceInfo.uuid;
PhoneGap.addConstructor=function(a){PhoneGap.onPhoneGapInit.subscribeOnce(function(){try{a()}catch(b){console.log("Failed to run constructor: "+b)}})};window.plugins||(window.plugins={});PhoneGap.addPlugin=function(a,b){window.plugins[a]?console.log("Error: Plugin "+a+" already exists."):window.plugins[a]=b};PhoneGap.onDOMContentLoaded=new PhoneGap.Channel("onDOMContentLoaded");PhoneGap.onNativeReady=new PhoneGap.Channel("onNativeReady");PhoneGap.onPhoneGapInit=new PhoneGap.Channel("onPhoneGapInit");
PhoneGap.onPhoneGapReady=new PhoneGap.Channel("onPhoneGapReady");PhoneGap.onPhoneGapInfoReady=new PhoneGap.Channel("onPhoneGapInfoReady");PhoneGap.onPhoneGapConnectionReady=new PhoneGap.Channel("onPhoneGapConnectionReady");PhoneGap.onDestroy=new PhoneGap.Channel("onDestroy");PhoneGap.onDestroy.subscribeOnce(function(){PhoneGap.shuttingDown=true});PhoneGap.shuttingDown=!1;"undefined"!==typeof _nativeReady&&PhoneGap.onNativeReady.fire();PhoneGap.onDeviceReady=new PhoneGap.Channel("onDeviceReady");PhoneGap.deviceReadyChannelsArray=
[PhoneGap.onPhoneGapReady,PhoneGap.onPhoneGapInfoReady,PhoneGap.onPhoneGapConnectionReady];PhoneGap.deviceReadyChannelsMap={};PhoneGap.waitForInitialization=function(a){if(a){var b=new PhoneGap.Channel(a);PhoneGap.deviceReadyChannelsMap[a]=b;PhoneGap.deviceReadyChannelsArray.push(b)}};PhoneGap.initializationComplete=function(a){(a=PhoneGap.deviceReadyChannelsMap[a])&&a.fire()};PhoneGap.Channel.join(function(){setTimeout(function(){if(PhoneGap.UsePolling)PhoneGap.JSCallbackPolling();else{var a=prompt("usePolling",
"gap_callbackServer:");PhoneGap.UsePolling=a;if(a=="true"){PhoneGap.UsePolling=true;PhoneGap.JSCallbackPolling()}else{PhoneGap.UsePolling=false;PhoneGap.JSCallback()}}},1);PhoneGap.onPhoneGapInit.fire();PhoneGap.onPhoneGapReady.fire();PhoneGap.Channel.join(function(){prompt("","gap_init:");PhoneGap.onDeviceReady.fire()},PhoneGap.deviceReadyChannelsArray)},[PhoneGap.onDOMContentLoaded,PhoneGap.onNativeReady]);document.addEventListener("DOMContentLoaded",function(){PhoneGap.onDOMContentLoaded.fire()},
!1);PhoneGap.m_document_addEventListener=document.addEventListener;PhoneGap.m_window_addEventListener=window.addEventListener;PhoneGap.addWindowEventHandler=function(a,b){PhoneGap.windowEventHandler[a]=b};PhoneGap.addDocumentEventHandler=function(a,b){PhoneGap.documentEventHandler[a]=b};document.addEventListener=function(a,b,c){var d=a.toLowerCase();if(d==="deviceready")PhoneGap.onDeviceReady.subscribeOnce(b);else{if(d==="backbutton")PhoneGap.exec(null,null,"App","overrideBackbutton",[true]);else if(typeof PhoneGap.documentEventHandler[d]!==
"undefined"&&PhoneGap.documentEventHandler[d](d,b,true))return;PhoneGap.m_document_addEventListener.call(document,a,b,c)}};window.addEventListener=function(a,b,c){var d=a.toLowerCase();typeof PhoneGap.windowEventHandler[d]!=="undefined"&&PhoneGap.windowEventHandler[d](d,b,true)||PhoneGap.m_window_addEventListener.call(window,a,b,c)};PhoneGap.m_document_removeEventListener=document.removeEventListener;PhoneGap.m_window_removeEventListener=window.removeEventListener;document.removeEventListener=function(a,
b,c){var d=a.toLowerCase();d==="backbutton"&&PhoneGap.exec(null,null,"App","overrideBackbutton",[false]);typeof PhoneGap.documentEventHandler[d]!=="undefined"&&PhoneGap.documentEventHandler[d](d,b,false)||PhoneGap.m_document_removeEventListener.call(document,a,b,c)};window.removeEventListener=function(a,b,c){var d=a.toLowerCase();typeof PhoneGap.windowEventHandler[d]!=="undefined"&&PhoneGap.windowEventHandler[d](d,b,false)||PhoneGap.m_window_removeEventListener.call(window,a,b,c)};PhoneGap.fireDocumentEvent=
function(a,b){var c=document.createEvent("Events");c.initEvent(a);if(b)for(var d in b)c[d]=b[d];document.dispatchEvent(c)};PhoneGap.fireWindowEvent=function(a,b){var c=document.createEvent("Events");c.initEvent(a);if(b)for(var d in b)c[d]=b[d];window.dispatchEvent(c)};PhoneGap.clone=function(a){var b,c;if(!a)return a;if(a instanceof Array){c=[];for(b=0;b<a.length;++b)c.push(PhoneGap.clone(a[b]));return c}if(typeof a==="function"||!(a instanceof Object)||a instanceof Date)return a;c={};for(b in a)if(!(b in
c)||c[b]!==a[b])c[b]=PhoneGap.clone(a[b]);return c};PhoneGap.callbackId=0;PhoneGap.callbacks={};PhoneGap.callbackStatus={NO_RESULT:0,OK:1,CLASS_NOT_FOUND_EXCEPTION:2,ILLEGAL_ACCESS_EXCEPTION:3,INSTANTIATION_EXCEPTION:4,MALFORMED_URL_EXCEPTION:5,IO_EXCEPTION:6,INVALID_ACTION:7,JSON_EXCEPTION:8,ERROR:9};PhoneGap.exec=function(a,b,c,d,g){try{var e=c+PhoneGap.callbackId++;if(a||b)PhoneGap.callbacks[e]={success:a,fail:b};var h=prompt(JSON.stringify(g),"gap:"+JSON.stringify([c,d,e,true]));if(h.length>0){eval("var v="+
h+";");if(v.status===PhoneGap.callbackStatus.OK){if(a){try{a(v.message)}catch(l){console.log("Error in success callback: "+e+" = "+l)}v.keepCallback||delete PhoneGap.callbacks[e]}return v.message}if(v.status===PhoneGap.callbackStatus.NO_RESULT)v.keepCallback||delete PhoneGap.callbacks[e];else{console.log("Error: Status="+v.status+" Message="+v.message);if(b){try{b(v.message)}catch(m){console.log("Error in error callback: "+e+" = "+m)}v.keepCallback||delete PhoneGap.callbacks[e]}return null}}}catch(p){console.log("Error: "+
p)}};PhoneGap.callbackSuccess=function(a,b){if(PhoneGap.callbacks[a]){if(b.status===PhoneGap.callbackStatus.OK)try{PhoneGap.callbacks[a].success&&PhoneGap.callbacks[a].success(b.message)}catch(c){console.log("Error in success callback: "+a+" = "+c)}b.keepCallback||delete PhoneGap.callbacks[a]}};PhoneGap.callbackError=function(a,b){if(PhoneGap.callbacks[a]){try{PhoneGap.callbacks[a].fail&&PhoneGap.callbacks[a].fail(b.message)}catch(c){console.log("Error in error callback: "+a+" = "+c)}b.keepCallback||
delete PhoneGap.callbacks[a]}};PhoneGap.run_command=function(){if(PhoneGap.available&&PhoneGap.queue.ready){PhoneGap.queue.ready=false;var a=PhoneGap.queue.commands.shift();if(PhoneGap.queue.commands.length===0){clearInterval(PhoneGap.queue.timer);PhoneGap.queue.timer=null}var b=[],c=null,d;for(d=1;d<a.length;d++){var g=a[d];if(g===void 0||g===null)g="";typeof g==="object"?c=g:b.push(encodeURIComponent(g))}a="gap://"+a[0]+"/"+b.join("/");if(c!==null){var e,b=[];for(e in c)c.hasOwnProperty(e)&&typeof e===
"string"&&b.push(encodeURIComponent(e)+"="+encodeURIComponent(c[e]));b.length>0&&(a=a+("?"+b.join("&")))}document.location=a}};PhoneGap.JSCallbackPort=null;PhoneGap.JSCallbackToken=null;PhoneGap.JSCallback=function(){if(!PhoneGap.shuttingDown)if(PhoneGap.UsePolling)PhoneGap.JSCallbackPolling();else{var a=new XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState===4&&!PhoneGap.shuttingDown)if(a.status===200){var b=decodeURIComponent(a.responseText);setTimeout(function(){try{eval(b)}catch(a){console.log("JSCallback: Message from Server: "+
b);console.log("JSCallback Error: "+a)}},1);setTimeout(PhoneGap.JSCallback,1)}else if(a.status===404)setTimeout(PhoneGap.JSCallback,10);else if(a.status===403)console.log("JSCallback Error: Invalid token.  Stopping callbacks.");else if(a.status===503)console.log("JSCallback Server Closed: Stopping callbacks.");else if(a.status===400)console.log("JSCallback Error: Bad request.  Stopping callbacks.");else{console.log("JSCallback Error: Request failed.");PhoneGap.UsePolling=true;PhoneGap.JSCallbackPolling()}};
if(PhoneGap.JSCallbackPort===null)PhoneGap.JSCallbackPort=prompt("getPort","gap_callbackServer:");if(PhoneGap.JSCallbackToken===null)PhoneGap.JSCallbackToken=prompt("getToken","gap_callbackServer:");a.open("GET","http://127.0.0.1:"+PhoneGap.JSCallbackPort+"/"+PhoneGap.JSCallbackToken,true);a.send()}};PhoneGap.JSCallbackPollingPeriod=50;PhoneGap.UsePolling=!1;PhoneGap.JSCallbackPolling=function(){if(!PhoneGap.shuttingDown)if(PhoneGap.UsePolling){var a=prompt("","gap_poll:");if(a){setTimeout(function(){try{eval(""+
a)}catch(b){console.log("JSCallbackPolling: Message from Server: "+a);console.log("JSCallbackPolling Error: "+b)}},1);setTimeout(PhoneGap.JSCallbackPolling,1)}else setTimeout(PhoneGap.JSCallbackPolling,PhoneGap.JSCallbackPollingPeriod)}else PhoneGap.JSCallback()};PhoneGap.createUUID=function(){return PhoneGap.UUIDcreatePart(4)+"-"+PhoneGap.UUIDcreatePart(2)+"-"+PhoneGap.UUIDcreatePart(2)+"-"+PhoneGap.UUIDcreatePart(2)+"-"+PhoneGap.UUIDcreatePart(6)};PhoneGap.UUIDcreatePart=function(a){var b="",c,
d;for(c=0;c<a;c++){d=parseInt(Math.random()*256,0).toString(16);d.length===1&&(d="0"+d);b=b+d}return b};PhoneGap.close=function(a,b,c){return typeof c==="undefined"?function(){return b.apply(a,arguments)}:function(){return b.apply(a,c)}};PhoneGap.includeJavascript=function(a,b){var c=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript";if(typeof b==="function")d.onload=b;d.src=a;c.appendChild(d)}}
if(!PhoneGap.hasResource("accelerometer")){PhoneGap.addResource("accelerometer");var Acceleration=function(a,b,c){this.x=a;this.y=b;this.z=c;this.timestamp=(new Date).getTime()},Accelerometer=function(){this.lastAcceleration=null;this.timers={}};Accelerometer.ERROR_MSG=["Not running","Starting","","Failed to start"];Accelerometer.prototype.getCurrentAcceleration=function(a,b){"function"!==typeof a?console.log("Accelerometer Error: successCallback is not a function"):b&&"function"!==typeof b?console.log("Accelerometer Error: errorCallback is not a function"):
PhoneGap.exec(a,b,"Accelerometer","getAcceleration",[])};Accelerometer.prototype.watchAcceleration=function(a,b,c){var d=void 0!==c?c.frequency:1E4;if("function"!==typeof a)console.log("Accelerometer Error: successCallback is not a function");else if(b&&"function"!==typeof b)console.log("Accelerometer Error: errorCallback is not a function");else return PhoneGap.exec(function(a){a<d+1E4&&PhoneGap.exec(null,null,"Accelerometer","setTimeout",[d+1E4])},function(){},"Accelerometer","getTimeout",[]),c=
PhoneGap.createUUID(),navigator.accelerometer.timers[c]=setInterval(function(){PhoneGap.exec(a,b,"Accelerometer","getAcceleration",[])},d?d:1),c};Accelerometer.prototype.clearWatch=function(a){a&&void 0!==navigator.accelerometer.timers[a]&&(clearInterval(navigator.accelerometer.timers[a]),delete navigator.accelerometer.timers[a])};PhoneGap.addConstructor(function(){"undefined"===typeof navigator.accelerometer&&(navigator.accelerometer=new Accelerometer)})}
PhoneGap.hasResource("app")||(PhoneGap.addResource("app"),function(){var a=function(){};a.prototype.clearCache=function(){PhoneGap.exec(null,null,"App","clearCache",[])};a.prototype.loadUrl=function(a,c){PhoneGap.exec(null,null,"App","loadUrl",[a,c])};a.prototype.cancelLoadUrl=function(){PhoneGap.exec(null,null,"App","cancelLoadUrl",[])};a.prototype.clearHistory=function(){PhoneGap.exec(null,null,"App","clearHistory",[])};a.prototype.backHistory=function(){PhoneGap.exec(null,null,"App","backHistory",
[])};a.prototype.overrideBackbutton=function(a){PhoneGap.exec(null,null,"App","overrideBackbutton",[a])};a.prototype.exitApp=function(){return PhoneGap.exec(null,null,"App","exitApp",[])};a.prototype.addWhiteListEntry=function(a,c){return PhoneGap.exec(null,null,"App","addWhiteListEntry",[a,c])};PhoneGap.addConstructor(function(){navigator.app=new a})}());
if(!PhoneGap.hasResource("battery")){PhoneGap.addResource("battery");var Battery=function(){this._isPlugged=this._level=null;this._batteryListener=[];this._lowListener=[];this._criticalListener=[]};Battery.prototype.eventHandler=function(a,b,c){var d=navigator.battery;if(c){d._batteryListener.length===0&&d._lowListener.length===0&&d._criticalListener.length===0&&PhoneGap.exec(d._status,d._error,"Battery","start",[]);if(a==="batterystatus"){a=d._batteryListener.indexOf(b);a===-1&&d._batteryListener.push(b)}else if(a===
"batterylow"){a=d._lowListener.indexOf(b);a===-1&&d._lowListener.push(b)}else if(a==="batterycritical"){a=d._criticalListener.indexOf(b);a===-1&&d._criticalListener.push(b)}}else{if(a==="batterystatus"){a=d._batteryListener.indexOf(b);a>-1&&d._batteryListener.splice(a,1)}else if(a==="batterylow"){a=d._lowListener.indexOf(b);a>-1&&d._lowListener.splice(a,1)}else if(a==="batterycritical"){a=d._criticalListener.indexOf(b);a>-1&&d._criticalListener.splice(a,1)}d._batteryListener.length===0&&d._lowListener.length===
0&&d._criticalListener.length===0&&PhoneGap.exec(null,null,"Battery","stop",[])}};Battery.prototype._status=function(a){if(a){if(this._level!=a.level||this._isPlugged!=a.isPlugged){PhoneGap.fireWindowEvent("batterystatus",a);if(a.level==20||a.level==5)a.level==20?PhoneGap.fireWindowEvent("batterylow",a):PhoneGap.fireWindowEvent("batterycritical",a)}this._level=a.level;this._isPlugged=a.isPlugged}};Battery.prototype._error=function(a){console.log("Error initializing Battery: "+a)};PhoneGap.addConstructor(function(){if(typeof navigator.battery===
"undefined"){navigator.battery=new Battery;PhoneGap.addWindowEventHandler("batterystatus",navigator.battery.eventHandler);PhoneGap.addWindowEventHandler("batterylow",navigator.battery.eventHandler);PhoneGap.addWindowEventHandler("batterycritical",navigator.battery.eventHandler)}})}
if(!PhoneGap.hasResource("camera")){PhoneGap.addResource("camera");var Camera=function(){this.options=this.errorCallback=this.successCallback=null};Camera.DestinationType={DATA_URL:0,FILE_URI:1};Camera.prototype.DestinationType=Camera.DestinationType;Camera.EncodingType={JPEG:0,PNG:1};Camera.prototype.EncodingType=Camera.EncodingType;Camera.MediaType={PICTURE:0,VIDEO:1,ALLMEDIA:2};Camera.prototype.MediaType=Camera.MediaType;Camera.PictureSourceType={PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2};Camera.prototype.PictureSourceType=
Camera.PictureSourceType;Camera.prototype.getPicture=function(a,b,c){if(typeof a!=="function")console.log("Camera Error: successCallback is not a function");else if(b&&typeof b!=="function")console.log("Camera Error: errorCallback is not a function");else{if(c===null||typeof c==="undefined")c={};if(c.quality===null||typeof c.quality==="undefined")c.quality=80;if(c.maxResolution===null||typeof c.maxResolution==="undefined")c.maxResolution=0;if(c.destinationType===null||typeof c.destinationType==="undefined")c.destinationType=
Camera.DestinationType.DATA_URL;if(c.sourceType===null||typeof c.sourceType==="undefined")c.sourceType=Camera.PictureSourceType.CAMERA;if(c.encodingType===null||typeof c.encodingType==="undefined")c.encodingType=Camera.EncodingType.JPEG;if(c.mediaType===null||typeof c.mediaType==="undefined")c.mediaType=Camera.MediaType.PICTURE;if(c.targetWidth===null||typeof c.targetWidth==="undefined")c.targetWidth=-1;else if(typeof c.targetWidth=="string"){var d=new Number(c.targetWidth);if(isNaN(d)===false)c.targetWidth=
d.valueOf()}if(c.targetHeight===null||typeof c.targetHeight==="undefined")c.targetHeight=-1;else if(typeof c.targetHeight=="string"){d=new Number(c.targetHeight);if(isNaN(d)===false)c.targetHeight=d.valueOf()}PhoneGap.exec(a,b,"Camera","takePicture",[c])}};PhoneGap.addConstructor(function(){if(typeof navigator.camera==="undefined")navigator.camera=new Camera})}
if(!PhoneGap.hasResource("capture")){PhoneGap.addResource("capture");var MediaFile=function(a,b,c,d,g){this.name=a||null;this.fullPath=b||null;this.type=c||null;this.lastModifiedDate=d||null;this.size=g||0};MediaFile.prototype.getFormatData=function(a,b){PhoneGap.exec(a,b,"Capture","getFormatData",[this.fullPath,this.type])};var MediaFileData=function(a,b,c,d,g){this.codecs=a||null;this.bitrate=b||0;this.height=c||0;this.width=d||0;this.duration=g||0},CaptureError=function(){this.code=null};CaptureError.CAPTURE_INTERNAL_ERR=
0;CaptureError.CAPTURE_APPLICATION_BUSY=1;CaptureError.CAPTURE_INVALID_ARGUMENT=2;CaptureError.CAPTURE_NO_MEDIA_FILES=3;CaptureError.CAPTURE_NOT_SUPPORTED=20;var Capture=function(){this.supportedAudioModes=[];this.supportedImageModes=[];this.supportedVideoModes=[]};Capture.prototype.captureAudio=function(a,b,c){PhoneGap.exec(a,b,"Capture","captureAudio",[c])};Capture.prototype.captureImage=function(a,b,c){PhoneGap.exec(a,b,"Capture","captureImage",[c])};Capture.prototype._castMediaFile=function(a){var b=
[],c;for(c=0;c<a.message.length;c++){var d=new MediaFile;d.name=a.message[c].name;d.fullPath=a.message[c].fullPath;d.type=a.message[c].type;d.lastModifiedDate=a.message[c].lastModifiedDate;d.size=a.message[c].size;b.push(d)}a.message=b;return a};Capture.prototype.captureVideo=function(a,b,c){PhoneGap.exec(a,b,"Capture","captureVideo",[c])};var ConfigurationData=function(){this.type=null;this.width=this.height=0},CaptureImageOptions=function(){this.limit=1;this.mode=null},CaptureVideoOptions=function(){this.limit=
1;this.duration=0;this.mode=null},CaptureAudioOptions=function(){this.limit=1;this.duration=0;this.mode=null};PhoneGap.addConstructor(function(){if(typeof navigator.device==="undefined")navigator.device=window.device=new Device;if(typeof navigator.device.capture==="undefined")navigator.device.capture=window.device.capture=new Capture})}
if(!PhoneGap.hasResource("compass")){PhoneGap.addResource("compass");CompassError=function(){this.code=null};CompassError.COMPASS_INTERNAL_ERR=0;CompassError.COMPASS_NOT_SUPPORTED=20;CompassHeading=function(){this.timestamp=this.headingAccuracy=this.trueHeading=this.magneticHeading=null};var Compass=function(){this.lastHeading=null;this.timers={}};Compass.ERROR_MSG=["Not running","Starting","","Failed to start"];Compass.prototype.getCurrentHeading=function(a,b){typeof a!=="function"?console.log("Compass Error: successCallback is not a function"):
b&&typeof b!=="function"?console.log("Compass Error: errorCallback is not a function"):PhoneGap.exec(a,b,"Compass","getHeading",[])};Compass.prototype.watchHeading=function(a,b,c){var d=c!==void 0?c.frequency:100;if(typeof a!=="function")console.log("Compass Error: successCallback is not a function");else if(b&&typeof b!=="function")console.log("Compass Error: errorCallback is not a function");else{PhoneGap.exec(function(a){a<d+1E4&&PhoneGap.exec(null,null,"Compass","setTimeout",[d+1E4])},function(){},
"Compass","getTimeout",[]);c=PhoneGap.createUUID();navigator.compass.timers[c]=setInterval(function(){PhoneGap.exec(a,b,"Compass","getHeading",[])},d?d:1);return c}};Compass.prototype.clearWatch=function(a){if(a&&navigator.compass.timers[a]){clearInterval(navigator.compass.timers[a]);delete navigator.compass.timers[a]}};Compass.prototype._castDate=function(a){if(a.message.timestamp)a.message.timestamp=new Date(a.message.timestamp);return a};PhoneGap.addConstructor(function(){if(typeof navigator.compass===
"undefined")navigator.compass=new Compass})}
if(!PhoneGap.hasResource("contact")){PhoneGap.addResource("contact");var Contact=function(a,b,c,d,g,e,h,l,m,p,u,t,o,q){this.id=a||null;this.rawId=null;this.displayName=b||null;this.name=c||null;this.nickname=d||null;this.phoneNumbers=g||null;this.emails=e||null;this.addresses=h||null;this.ims=l||null;this.organizations=m||null;this.birthday=p||null;this.note=u||null;this.photos=t||null;this.categories=o||null;this.urls=q||null},ContactError=function(){this.code=null};ContactError.UNKNOWN_ERROR=0;
ContactError.INVALID_ARGUMENT_ERROR=1;ContactError.TIMEOUT_ERROR=2;ContactError.PENDING_OPERATION_ERROR=3;ContactError.IO_ERROR=4;ContactError.NOT_SUPPORTED_ERROR=5;ContactError.PERMISSION_DENIED_ERROR=20;Contact.prototype.remove=function(a,b){if(this.id===null){var c=new ContactError;c.code=ContactError.UNKNOWN_ERROR;b(c)}else PhoneGap.exec(a,b,"Contacts","remove",[this.id])};Contact.prototype.clone=function(){var a=PhoneGap.clone(this),b;a.id=null;a.rawId=null;if(a.phoneNumbers)for(b=0;b<a.phoneNumbers.length;b++)a.phoneNumbers[b].id=
null;if(a.emails)for(b=0;b<a.emails.length;b++)a.emails[b].id=null;if(a.addresses)for(b=0;b<a.addresses.length;b++)a.addresses[b].id=null;if(a.ims)for(b=0;b<a.ims.length;b++)a.ims[b].id=null;if(a.organizations)for(b=0;b<a.organizations.length;b++)a.organizations[b].id=null;if(a.tags)for(b=0;b<a.tags.length;b++)a.tags[b].id=null;if(a.photos)for(b=0;b<a.photos.length;b++)a.photos[b].id=null;if(a.urls)for(b=0;b<a.urls.length;b++)a.urls[b].id=null;return a};Contact.prototype.save=function(a,b){PhoneGap.exec(a,
b,"Contacts","save",[this])};var ContactName=function(a,b,c,d,g,e){this.formatted=a||null;this.familyName=b||null;this.givenName=c||null;this.middleName=d||null;this.honorificPrefix=g||null;this.honorificSuffix=e||null},ContactField=function(a,b,c){this.id=null;this.type=a||null;this.value=b||null;this.pref=c||null},ContactAddress=function(a,b,c,d,g,e,h,l){this.id=null;this.pref=a||null;this.type=b||null;this.formatted=c||null;this.streetAddress=d||null;this.locality=g||null;this.region=e||null;this.postalCode=
h||null;this.country=l||null},ContactOrganization=function(a,b,c,d,g){this.id=null;this.pref=a||null;this.type=b||null;this.name=c||null;this.department=d||null;this.title=g||null},Contacts=function(){this.inProgress=false;this.records=[]};Contacts.prototype.find=function(a,b,c,d){if(b===null)throw new TypeError("You must specify a success callback for the find command.");a===null||a==="undefined"||a.length==="undefined"||a.length<=0?typeof c==="function"&&c({code:ContactError.INVALID_ARGUMENT_ERROR}):
PhoneGap.exec(b,c,"Contacts","search",[a,d])};Contacts.prototype.create=function(a){var b,c=new Contact;for(b in a)c[b]!=="undefined"&&(c[b]=a[b]);return c};Contacts.prototype.cast=function(a){var b=[],c;for(c=0;c<a.message.length;c++)b.push(navigator.contacts.create(a.message[c]));a.message=b;return a};var ContactFindOptions=function(a,b){this.filter=a||"";this.multiple=b||false};PhoneGap.addConstructor(function(){if(typeof navigator.contacts==="undefined")navigator.contacts=new Contacts})}
if(!PhoneGap.hasResource("crypto")){PhoneGap.addResource("crypto");var Crypto=function(){};Crypto.prototype.encrypt=function(a,b,c){this.encryptWin=c;PhoneGap.exec(null,null,"Crypto","encrypt",[a,b])};Crypto.prototype.decrypt=function(a,b,c){this.decryptWin=c;PhoneGap.exec(null,null,"Crypto","decrypt",[a,b])};Crypto.prototype.gotCryptedString=function(a){this.encryptWin(a)};Crypto.prototype.getPlainString=function(a){this.decryptWin(a)};PhoneGap.addConstructor(function(){if(typeof navigator.Crypto===
"undefined")navigator.Crypto=new Crypto})}
if(!PhoneGap.hasResource("device")){PhoneGap.addResource("device");var Device=function(){this.available=PhoneGap.available;this.phonegap=this.uuid=this.name=this.version=this.platform=null;var a=this;this.getInfo(function(b){a.available=true;a.platform=b.platform;a.version=b.version;a.name=b.name;a.uuid=b.uuid;a.phonegap=b.phonegap;PhoneGap.onPhoneGapInfoReady.fire()},function(b){a.available=false;console.log("Error initializing PhoneGap: "+b);alert("Error initializing PhoneGap: "+b)})};Device.prototype.getInfo=
function(a,b){typeof a!=="function"?console.log("Device Error: successCallback is not a function"):b&&typeof b!=="function"?console.log("Device Error: errorCallback is not a function"):PhoneGap.exec(a,b,"Device","getDeviceInfo",[])};Device.prototype.overrideBackButton=function(){console.log("Device.overrideBackButton() is deprecated.  Use App.overrideBackbutton(true).");navigator.app.overrideBackbutton(true)};Device.prototype.resetBackButton=function(){console.log("Device.resetBackButton() is deprecated.  Use App.overrideBackbutton(false).");
navigator.app.overrideBackbutton(false)};Device.prototype.exitApp=function(){console.log("Device.exitApp() is deprecated.  Use App.exitApp().");navigator.app.exitApp()};PhoneGap.addConstructor(function(){if(typeof navigator.device==="undefined")navigator.device=window.device=new Device})}
if(!PhoneGap.hasResource("file")){PhoneGap.addResource("file");var FileProperties=function(a){this.filePath=a;this.size=0;this.lastModifiedDate=null},File=function(a,b,c,d,g){this.name=a||null;this.fullPath=b||null;this.type=c||null;this.lastModifiedDate=d||null;this.size=g||0},FileError=function(){this.code=null};FileError.NOT_FOUND_ERR=1;FileError.SECURITY_ERR=2;FileError.ABORT_ERR=3;FileError.NOT_READABLE_ERR=4;FileError.ENCODING_ERR=5;FileError.NO_MODIFICATION_ALLOWED_ERR=6;FileError.INVALID_STATE_ERR=
7;FileError.SYNTAX_ERR=8;FileError.INVALID_MODIFICATION_ERR=9;FileError.QUOTA_EXCEEDED_ERR=10;FileError.TYPE_MISMATCH_ERR=11;FileError.PATH_EXISTS_ERR=12;var FileReader=function(){this.fileName="";this.readyState=0;this.onabort=this.onloadend=this.onerror=this.onload=this.onprogress=this.onloadstart=this.error=this.result=null};FileReader.EMPTY=0;FileReader.LOADING=1;FileReader.DONE=2;FileReader.prototype.abort=function(){this.readyState=FileReader.DONE;this.result=null;var a=new FileError;a.code=
a.ABORT_ERR;this.error=a;if(typeof this.onerror==="function")this.onerror({type:"error",target:this});if(typeof this.onabort==="function")this.onabort({type:"abort",target:this});if(typeof this.onloadend==="function")this.onloadend({type:"loadend",target:this})};FileReader.prototype.readAsText=function(a,b){this.fileName="";this.fileName=typeof a.fullPath==="undefined"?a:a.fullPath;this.readyState=FileReader.LOADING;if(typeof this.onloadstart==="function")this.onloadstart({type:"loadstart",target:this});
var c=this;PhoneGap.exec(function(a){if(c.readyState!==FileReader.DONE){c.result=a;if(typeof c.onload==="function")c.onload({type:"load",target:c});c.readyState=FileReader.DONE;if(typeof c.onloadend==="function")c.onloadend({type:"loadend",target:c})}},function(a){if(c.readyState!==FileReader.DONE){c.error=a;if(typeof c.onerror==="function")c.onerror({type:"error",target:c});c.readyState=FileReader.DONE;if(typeof c.onloadend==="function")c.onloadend({type:"loadend",target:c})}},"File","readAsText",
[this.fileName,b?b:"UTF-8"])};FileReader.prototype.readAsDataURL=function(a){this.fileName="";this.fileName=typeof a.fullPath==="undefined"?a:a.fullPath;this.readyState=FileReader.LOADING;if(typeof this.onloadstart==="function")this.onloadstart({type:"loadstart",target:this});var b=this;PhoneGap.exec(function(a){if(b.readyState!==FileReader.DONE){b.result=a;if(typeof b.onload==="function")b.onload({type:"load",target:b});b.readyState=FileReader.DONE;if(typeof b.onloadend==="function")b.onloadend({type:"loadend",
target:b})}},function(a){if(b.readyState!==FileReader.DONE){b.error=a;if(typeof b.onerror==="function")b.onerror({type:"error",target:b});b.readyState=FileReader.DONE;if(typeof b.onloadend==="function")b.onloadend({type:"loadend",target:b})}},"File","readAsDataURL",[this.fileName])};FileReader.prototype.readAsBinaryString=function(a){this.fileName=a};FileReader.prototype.readAsArrayBuffer=function(a){this.fileName=a};var FileWriter=function(a){this.fileName="";this.length=0;if(a){this.fileName=a.fullPath||
a;this.length=a.size||0}this.readyState=this.position=0;this.onerror=this.onabort=this.onwriteend=this.onwrite=this.onprogress=this.onwritestart=this.error=this.result=null};FileWriter.INIT=0;FileWriter.WRITING=1;FileWriter.DONE=2;FileWriter.prototype.abort=function(){if(this.readyState===FileWriter.DONE||this.readyState===FileWriter.INIT)throw FileError.INVALID_STATE_ERR;var a=new FileError;a.code=a.ABORT_ERR;this.error=a;if(typeof this.onerror==="function")this.onerror({type:"error",target:this});
if(typeof this.onabort==="function")this.onabort({type:"abort",target:this});this.readyState=FileWriter.DONE;if(typeof this.onwriteend=="function")this.onwriteend({type:"writeend",target:this})};FileWriter.prototype.write=function(a){if(this.readyState===FileWriter.WRITING)throw FileError.INVALID_STATE_ERR;this.readyState=FileWriter.WRITING;var b=this;if(typeof b.onwritestart==="function")b.onwritestart({type:"writestart",target:b});PhoneGap.exec(function(a){if(b.readyState!==FileWriter.DONE){b.position=
b.position+a;b.length=b.position;if(typeof b.onwrite==="function")b.onwrite({type:"write",target:b});b.readyState=FileWriter.DONE;if(typeof b.onwriteend==="function")b.onwriteend({type:"writeend",target:b})}},function(a){if(b.readyState!==FileWriter.DONE){b.error=a;if(typeof b.onerror==="function")b.onerror({type:"error",target:b});b.readyState=FileWriter.DONE;if(typeof b.onwriteend==="function")b.onwriteend({type:"writeend",target:b})}},"File","write",[this.fileName,a,this.position])};FileWriter.prototype.seek=
function(a){if(this.readyState===FileWriter.WRITING)throw FileError.INVALID_STATE_ERR;if(a)this.position=a<0?Math.max(a+this.length,0):a>this.length?this.length:a};FileWriter.prototype.truncate=function(a){if(this.readyState===FileWriter.WRITING)throw FileError.INVALID_STATE_ERR;this.readyState=FileWriter.WRITING;var b=this;if(typeof b.onwritestart==="function")b.onwritestart({type:"writestart",target:this});PhoneGap.exec(function(a){if(b.readyState!==FileWriter.DONE){b.length=a;b.position=Math.min(b.position,
a);if(typeof b.onwrite==="function")b.onwrite({type:"write",target:b});b.readyState=FileWriter.DONE;if(typeof b.onwriteend==="function")b.onwriteend({type:"writeend",target:b})}},function(a){if(b.readyState!==FileWriter.DONE){b.error=a;if(typeof b.onerror==="function")b.onerror({type:"error",target:b});b.readyState=FileWriter.DONE;if(typeof b.onwriteend==="function")b.onwriteend({type:"writeend",target:b})}},"File","truncate",[this.fileName,a])};var Metadata=function(){this.modificationTime=null},
Flags=function(a,b){this.create=a||false;this.exclusive=b||false},FileSystem=function(){this.root=this.name=null},DirectoryReader=function(a){this.fullPath=a||null};DirectoryReader.prototype.readEntries=function(a,b){PhoneGap.exec(a,b,"File","readEntries",[this.fullPath])};var DirectoryEntry=function(){this.isFile=false;this.isDirectory=true;this.filesystem=this.fullPath=this.name=null};DirectoryEntry.prototype.copyTo=function(a,b,c,d){PhoneGap.exec(c,d,"File","copyTo",[this.fullPath,a,b])};DirectoryEntry.prototype.getMetadata=
function(a,b){PhoneGap.exec(a,b,"File","getMetadata",[this.fullPath])};DirectoryEntry.prototype.getParent=function(a,b){PhoneGap.exec(a,b,"File","getParent",[this.fullPath])};DirectoryEntry.prototype.moveTo=function(a,b,c,d){PhoneGap.exec(c,d,"File","moveTo",[this.fullPath,a,b])};DirectoryEntry.prototype.remove=function(a,b){PhoneGap.exec(a,b,"File","remove",[this.fullPath])};DirectoryEntry.prototype.toURI=function(){return"file://"+this.fullPath};DirectoryEntry.prototype.createReader=function(){return new DirectoryReader(this.fullPath)};
DirectoryEntry.prototype.getDirectory=function(a,b,c,d){PhoneGap.exec(c,d,"File","getDirectory",[this.fullPath,a,b])};DirectoryEntry.prototype.getFile=function(a,b,c,d){PhoneGap.exec(c,d,"File","getFile",[this.fullPath,a,b])};DirectoryEntry.prototype.removeRecursively=function(a,b){PhoneGap.exec(a,b,"File","removeRecursively",[this.fullPath])};var FileEntry=function(){this.isFile=true;this.isDirectory=false;this.filesystem=this.fullPath=this.name=null};FileEntry.prototype.copyTo=function(a,b,c,d){PhoneGap.exec(c,
d,"File","copyTo",[this.fullPath,a,b])};FileEntry.prototype.getMetadata=function(a,b){PhoneGap.exec(a,b,"File","getMetadata",[this.fullPath])};FileEntry.prototype.getParent=function(a,b){PhoneGap.exec(a,b,"File","getParent",[this.fullPath])};FileEntry.prototype.moveTo=function(a,b,c,d){PhoneGap.exec(c,d,"File","moveTo",[this.fullPath,a,b])};FileEntry.prototype.remove=function(a,b){PhoneGap.exec(a,b,"File","remove",[this.fullPath])};FileEntry.prototype.toURI=function(){return"file://"+this.fullPath};
FileEntry.prototype.createWriter=function(a,b){this.file(function(c){c=new FileWriter(c);(c.fileName===null||c.fileName==="")&&typeof b=="function"&&b({code:FileError.INVALID_STATE_ERR});typeof a=="function"&&a(c)},b)};FileEntry.prototype.file=function(a,b){PhoneGap.exec(a,b,"File","getFileMetadata",[this.fullPath])};var LocalFileSystem=function(){};LocalFileSystem.TEMPORARY=0;LocalFileSystem.PERSISTENT=1;LocalFileSystem.RESOURCE=2;LocalFileSystem.APPLICATION=3;LocalFileSystem.prototype.requestFileSystem=
function(a,b,c,d){a<0||a>3?typeof d=="function"&&d({code:FileError.SYNTAX_ERR}):PhoneGap.exec(c,d,"File","requestFileSystem",[a,b])};LocalFileSystem.prototype.resolveLocalFileSystemURI=function(a,b,c){PhoneGap.exec(b,c,"File","resolveLocalFileSystemURI",[a])};LocalFileSystem.prototype._castFS=function(a){var b=null,b=new DirectoryEntry;b.isDirectory=a.message.root.isDirectory;b.isFile=a.message.root.isFile;b.name=a.message.root.name;b.fullPath=a.message.root.fullPath;a.message.root=b;return a};LocalFileSystem.prototype._castEntry=
function(a){var b=null;if(a.message.isDirectory){console.log("This is a dir");b=new DirectoryEntry}else if(a.message.isFile){console.log("This is a file");b=new FileEntry}b.isDirectory=a.message.isDirectory;b.isFile=a.message.isFile;b.name=a.message.name;b.fullPath=a.message.fullPath;a.message=b;return a};LocalFileSystem.prototype._castEntries=function(a){for(var b=a.message,c=[],d=0;d<b.length;d++)c.push(window.localFileSystem._createEntry(b[d]));a.message=c;return a};LocalFileSystem.prototype._createEntry=
function(a){var b=null;if(a.isDirectory){console.log("This is a dir");b=new DirectoryEntry}else if(a.isFile){console.log("This is a file");b=new FileEntry}b.isDirectory=a.isDirectory;b.isFile=a.isFile;b.name=a.name;b.fullPath=a.fullPath;return b};LocalFileSystem.prototype._castDate=function(a){if(a.message.modificationTime)a.message.modificationTime=new Date(a.message.modificationTime);else if(a.message.lastModifiedDate){var b=new File;b.size=a.message.size;b.type=a.message.type;b.name=a.message.name;
b.fullPath=a.message.fullPath;b.lastModifiedDate=new Date(a.message.lastModifiedDate);a.message=b}return a};PhoneGap.addConstructor(function(){var a=new LocalFileSystem;if(typeof window.localFileSystem=="undefined")window.localFileSystem=a;if(typeof window.requestFileSystem=="undefined")window.requestFileSystem=a.requestFileSystem;if(typeof window.resolveLocalFileSystemURI=="undefined")window.resolveLocalFileSystemURI=a.resolveLocalFileSystemURI})}
if(!PhoneGap.hasResource("filetransfer")){PhoneGap.addResource("filetransfer");var FileTransfer=function(){},FileUploadResult=function(){this.bytesSent=0;this.response=this.responseCode=null},FileTransferError=function(){this.code=null};FileTransferError.FILE_NOT_FOUND_ERR=1;FileTransferError.INVALID_URL_ERR=2;FileTransferError.CONNECTION_ERR=3;FileTransfer.prototype.upload=function(a,b,c,d,g,e){var h=null,l=null,m=null,p=null,u=true;if(g){h=g.fileKey;l=g.fileName;m=g.mimeType;if(g.chunkedMode!=null||
typeof g.chunkedMode!="undefined")u=g.chunkedMode;p=g.params?g.params:{}}PhoneGap.exec(c,d,"FileTransfer","upload",[a,b,h,l,m,p,e,u])};var FileUploadOptions=function(a,b,c,d){this.fileKey=a||null;this.fileName=b||null;this.mimeType=c||null;this.params=d||null}}
if(!PhoneGap.hasResource("geolocation")){PhoneGap.addResource("geolocation");var Geolocation=function(){this.lastPosition=null;this.listeners={}},PositionError=function(a,b){this.code=a;this.message=b};PositionError.PERMISSION_DENIED=1;PositionError.POSITION_UNAVAILABLE=2;PositionError.TIMEOUT=3;Geolocation.prototype.getCurrentPosition=function(a,b,c){if(navigator._geo.listeners.global){console.log("Geolocation Error: Still waiting for previous getCurrentPosition() request.");try{b(new PositionError(PositionError.TIMEOUT,
"Geolocation Error: Still waiting for previous getCurrentPosition() request."))}catch(d){}}else{var g=1E4,e=false,h=1E4;if(typeof c!=="undefined"){if(typeof c.maximumAge!=="undefined")g=c.maximumAge;if(typeof c.enableHighAccuracy!=="undefined")e=c.enableHighAccuracy;if(typeof c.timeout!=="undefined")h=c.timeout}navigator._geo.listeners.global={success:a,fail:b};PhoneGap.exec(null,null,"Geolocation","getCurrentLocation",[e,h,g])}};Geolocation.prototype.watchPosition=function(a,b,c){var d=1E4,g=false,
e=1E4;if(typeof c!=="undefined"){if(typeof c.frequency!=="undefined")d=c.frequency;if(typeof c.maximumAge!=="undefined")d=c.maximumAge;if(typeof c.enableHighAccuracy!=="undefined")g=c.enableHighAccuracy;if(typeof c.timeout!=="undefined")e=c.timeout}c=PhoneGap.createUUID();navigator._geo.listeners[c]={success:a,fail:b};PhoneGap.exec(null,null,"Geolocation","start",[c,g,e,d]);return c};Geolocation.prototype.success=function(a,b,c,d,g,e,h,l){d=new Coordinates(b,c,d,g,e,h);l=new Position(d,l);try{if(b===
"undefined"||c==="undefined")navigator._geo.listeners[a].fail(new PositionError(PositionError.POSITION_UNAVAILABLE,"Lat/Lng are undefined."));else{navigator._geo.lastPosition=l;navigator._geo.listeners[a].success(l)}}catch(m){console.log("Geolocation Error: Error calling success callback function.")}a==="global"&&delete navigator._geo.listeners.global};Geolocation.prototype.fail=function(a,b,c){try{navigator._geo.listeners[a].fail(new PositionError(b,c))}catch(d){console.log("Geolocation Error: Error calling error callback function.")}};
Geolocation.prototype.clearWatch=function(a){PhoneGap.exec(null,null,"Geolocation","stop",[a]);delete navigator._geo.listeners[a]};Geolocation.usingPhoneGap=!1;Geolocation.usePhoneGap=function(){if(!Geolocation.usingPhoneGap){Geolocation.usingPhoneGap=true;navigator.geolocation.setLocation=navigator._geo.setLocation;navigator.geolocation.getCurrentPosition=navigator._geo.getCurrentPosition;navigator.geolocation.watchPosition=navigator._geo.watchPosition;navigator.geolocation.clearWatch=navigator._geo.clearWatch;
navigator.geolocation.start=navigator._geo.start;navigator.geolocation.stop=navigator._geo.stop}};PhoneGap.addConstructor(function(){navigator._geo=new Geolocation;if(typeof navigator.geolocation==="undefined"){navigator.geolocation=navigator._geo;Geolocation.usingPhoneGap=true}})}
if(!PhoneGap.hasResource("media")){PhoneGap.addResource("media");var Media=function(a,b,c,d,g){if(b&&typeof b!=="function")console.log("Media Error: successCallback is not a function");else if(c&&typeof c!=="function")console.log("Media Error: errorCallback is not a function");else if(d&&typeof d!=="function")console.log("Media Error: statusCallback is not a function");else if(g&&typeof g!=="function")console.log("Media Error: positionCallback is not a function");else{this.id=PhoneGap.createUUID();
PhoneGap.mediaObjects[this.id]=this;this.src=a;this.successCallback=b;this.errorCallback=c;this.statusCallback=d;this.positionCallback=g;this._position=this._duration=-1}};Media.MEDIA_STATE=1;Media.MEDIA_DURATION=2;Media.MEDIA_POSITION=3;Media.MEDIA_ERROR=9;Media.MEDIA_NONE=0;Media.MEDIA_STARTING=1;Media.MEDIA_RUNNING=2;Media.MEDIA_PAUSED=3;Media.MEDIA_STOPPED=4;Media.MEDIA_MSG=["None","Starting","Running","Paused","Stopped"];var MediaError=function(){this.code=null;this.message=""};MediaError.MEDIA_ERR_NONE_ACTIVE=
0;MediaError.MEDIA_ERR_ABORTED=1;MediaError.MEDIA_ERR_NETWORK=2;MediaError.MEDIA_ERR_DECODE=3;MediaError.MEDIA_ERR_NONE_SUPPORTED=4;Media.prototype.play=function(){PhoneGap.exec(null,null,"Media","startPlayingAudio",[this.id,this.src])};Media.prototype.stop=function(){return PhoneGap.exec(null,null,"Media","stopPlayingAudio",[this.id])};Media.prototype.seekTo=function(a){PhoneGap.exec(null,null,"Media","seekToAudio",[this.id,a])};Media.prototype.pause=function(){PhoneGap.exec(null,null,"Media","pausePlayingAudio",
[this.id])};Media.prototype.getDuration=function(){return this._duration};Media.prototype.getCurrentPosition=function(a,b){PhoneGap.exec(a,b,"Media","getCurrentPositionAudio",[this.id])};Media.prototype.startRecord=function(){PhoneGap.exec(null,null,"Media","startRecordingAudio",[this.id,this.src])};Media.prototype.stopRecord=function(){PhoneGap.exec(null,null,"Media","stopRecordingAudio",[this.id])};Media.prototype.release=function(){PhoneGap.exec(null,null,"Media","release",[this.id])};Media.prototype.setVolume=
function(a){PhoneGap.exec(null,null,"Media","setVolume",[this.id,a])};PhoneGap.mediaObjects={};PhoneGap.Media=function(){};PhoneGap.Media.getMediaObject=function(a){return PhoneGap.mediaObjects[a]};PhoneGap.Media.onStatus=function(a,b,c){a=PhoneGap.mediaObjects[a];if(b===Media.MEDIA_STATE){c===Media.MEDIA_STOPPED&&a.successCallback&&a.successCallback();a.statusCallback&&a.statusCallback(c)}else if(b===Media.MEDIA_DURATION)a._duration=c;else if(b===Media.MEDIA_ERROR)a.errorCallback&&a.errorCallback({code:c});
else if(b==Media.MEDIA_POSITION)a._position=c}}
if(!PhoneGap.hasResource("network")){PhoneGap.addResource("network");var Connection=function(){this.type=null;this._firstRun=true;this._timer=null;this.timeout=500;var a=this;this.getInfo(function(b){if(b=="none")a._timer=setTimeout(function(){a.type=b;PhoneGap.fireDocumentEvent("offline");a._timer=null},a.timeout);else{if(a._timer!=null){clearTimeout(a._timer);a._timer=null}a.type=b;PhoneGap.fireDocumentEvent("online")}if(a._firstRun){a._firstRun=false;PhoneGap.onPhoneGapConnectionReady.fire()}},
function(b){if(a._firstRun){a._firstRun=false;PhoneGap.onPhoneGapConnectionReady.fire()}console.log("Error initializing Network Connection: "+b)})};Connection.UNKNOWN="unknown";Connection.ETHERNET="ethernet";Connection.WIFI="wifi";Connection.CELL_2G="2g";Connection.CELL_3G="3g";Connection.CELL_4G="4g";Connection.NONE="none";Connection.prototype.getInfo=function(a,b){PhoneGap.exec(a,b,"Network Status","getConnectionInfo",[])};PhoneGap.addConstructor(function(){if(typeof navigator.network==="undefined")navigator.network=
{};if(typeof navigator.network.connection==="undefined")navigator.network.connection=new Connection})}
if(!PhoneGap.hasResource("notification")){PhoneGap.addResource("notification");var Notification=function(){};Notification.prototype.alert=function(a,b,c,d){PhoneGap.exec(b,null,"Notification","alert",[a,c||"Alert",d||"OK"])};Notification.prototype.confirm=function(a,b,c,d){PhoneGap.exec(b,null,"Notification","confirm",[a,c||"Confirm",d||"OK,Cancel"])};Notification.prototype.activityStart=function(){PhoneGap.exec(null,null,"Notification","activityStart",["Busy","Please wait..."])};Notification.prototype.activityStop=
function(){PhoneGap.exec(null,null,"Notification","activityStop",[])};Notification.prototype.progressStart=function(a,b){PhoneGap.exec(null,null,"Notification","progressStart",[a,b])};Notification.prototype.progressValue=function(a){PhoneGap.exec(null,null,"Notification","progressValue",[a])};Notification.prototype.progressStop=function(){PhoneGap.exec(null,null,"Notification","progressStop",[])};Notification.prototype.blink=function(){};Notification.prototype.vibrate=function(a){PhoneGap.exec(null,
null,"Notification","vibrate",[a])};Notification.prototype.beep=function(a){PhoneGap.exec(null,null,"Notification","beep",[a])};PhoneGap.addConstructor(function(){if(typeof navigator.notification==="undefined")navigator.notification=new Notification})}
if(!PhoneGap.hasResource("position")){PhoneGap.addResource("position");var Position=function(a,b){this.coords=a;this.timestamp=b!=="undefined"?b:(new Date).getTime()},Coordinates=function(a,b,c,d,g,e,h){this.latitude=a;this.longitude=b;this.accuracy=d;this.altitude=c;this.heading=g;this.speed=e;this.altitudeAccuracy=h!=="undefined"?h:null},PositionOptions=function(){this.enableHighAccuracy=true;this.timeout=1E4},PositionError=function(){this.code=null;this.message=""};PositionError.UNKNOWN_ERROR=
0;PositionError.PERMISSION_DENIED=1;PositionError.POSITION_UNAVAILABLE=2;PositionError.TIMEOUT=3}
if(!PhoneGap.hasResource("storage")){PhoneGap.addResource("storage");var DroidDB_Rows=function(){this.resultSet=[];this.length=0};DroidDB_Rows.prototype.item=function(a){return this.resultSet[a]};var DroidDB_Result=function(){this.rows=new DroidDB_Rows},DroidDB=function(){this.queryQueue={}};DroidDB.prototype.completeQuery=function(a,b){var c=this.queryQueue[a];if(c)try{delete this.queryQueue[a];var d=c.tx;if(d&&d.queryList[a]){var g=new DroidDB_Result;g.rows.resultSet=b;g.rows.length=b.length;try{typeof c.successCallback===
"function"&&c.successCallback(c.tx,g)}catch(e){console.log("executeSql error calling user success callback: "+e)}d.queryComplete(a)}}catch(h){console.log("executeSql error: "+h)}};DroidDB.prototype.fail=function(a,b){var c=this.queryQueue[b];if(c)try{delete this.queryQueue[b];var d=c.tx;if(d&&d.queryList[b]){d.queryList={};try{typeof c.errorCallback==="function"&&c.errorCallback(c.tx,a)}catch(g){console.log("executeSql error calling user error callback: "+g)}d.queryFailed(b,a)}}catch(e){console.log("executeSql error: "+
e)}};var DroidDB_Query=function(a){this.id=PhoneGap.createUUID();droiddb.queryQueue[this.id]=this;this.resultSet=[];this.tx=a;this.tx.queryList[this.id]=this;this.errorCallback=this.successCallback=null},DroidDB_Tx=function(){this.id=PhoneGap.createUUID();this.errorCallback=this.successCallback=null;this.queryList={}};DroidDB_Tx.prototype.queryComplete=function(a){delete this.queryList[a];if(this.successCallback){var a=0,b;for(b in this.queryList)this.queryList.hasOwnProperty(b)&&a++;if(a===0)try{this.successCallback()}catch(c){console.log("Transaction error calling user success callback: "+
c)}}};DroidDB_Tx.prototype.queryFailed=function(a,b){this.queryList={};if(this.errorCallback)try{this.errorCallback(b)}catch(c){console.log("Transaction error calling user error callback: "+c)}};DroidDB_Tx.prototype.executeSql=function(a,b,c,d){typeof b==="undefined"&&(b=[]);var g=new DroidDB_Query(this);droiddb.queryQueue[g.id]=g;g.successCallback=c;g.errorCallback=d;PhoneGap.exec(null,null,"Storage","executeSql",[a,b,g.id])};var DatabaseShell=function(){};DatabaseShell.prototype.transaction=function(a,
b,c){var d=new DroidDB_Tx;d.successCallback=c;d.errorCallback=b;try{a(d)}catch(g){console.log("Transaction error: "+g);if(d.errorCallback)try{d.errorCallback(g)}catch(e){console.log("Transaction error calling user error callback: "+g)}}};var DroidDB_openDatabase=function(a,b,c,d){PhoneGap.exec(null,null,"Storage","openDatabase",[a,b,c,d]);return new DatabaseShell},CupcakeLocalStorage=function(){try{this.db=openDatabase("localStorage","1.0","localStorage",2621440);var a={};this.length=0;var b=function(a){this.length=
a;localStorage.length=a};this.db.transaction(function(c){c.executeSql("CREATE TABLE IF NOT EXISTS storage (id NVARCHAR(40) PRIMARY KEY, body NVARCHAR(255))");c.executeSql("SELECT * FROM storage",[],function(c,d){for(var h=0;h<d.rows.length;h++)a[d.rows.item(h).id]=d.rows.item(h).body;b(d.rows.length);PhoneGap.initializationComplete("cupcakeStorage")})},function(a){alert(a.message)});this.setItem=function(b,c){typeof a[b]=="undefined"&&this.length++;a[b]=c;this.db.transaction(function(a){a.executeSql("CREATE TABLE IF NOT EXISTS storage (id NVARCHAR(40) PRIMARY KEY, body NVARCHAR(255))");
a.executeSql("REPLACE INTO storage (id, body) values(?,?)",[b,c])})};this.getItem=function(b){return a[b]};this.removeItem=function(b){delete a[b];this.length--;this.db.transaction(function(a){a.executeSql("CREATE TABLE IF NOT EXISTS storage (id NVARCHAR(40) PRIMARY KEY, body NVARCHAR(255))");a.executeSql("DELETE FROM storage where id=?",[b])})};this.clear=function(){a={};this.length=0;this.db.transaction(function(a){a.executeSql("CREATE TABLE IF NOT EXISTS storage (id NVARCHAR(40) PRIMARY KEY, body NVARCHAR(255))");
a.executeSql("DELETE FROM storage",[])})};this.key=function(b){var c=0,e;for(e in a){if(c==b)return e;c++}return null}}catch(c){alert("Database error "+c+".")}};PhoneGap.addConstructor(function(){var a=function(){navigator.openDatabase=window.openDatabase=DroidDB_openDatabase;window.droiddb=new DroidDB};if(typeof window.openDatabase==="undefined")a();else{window.openDatabase_orig=window.openDatabase;window.openDatabase=function(b,c,d,g){var e=null;try{e=window.openDatabase_orig(b,c,d,g)}catch(h){e=
null}if(e==null){a();return DroidDB_openDatabase(b,c,d,g)}return e}}if(typeof window.localStorage==="undefined"){navigator.localStorage=window.localStorage=new CupcakeLocalStorage;PhoneGap.waitForInitialization("cupcakeStorage")}})};(function(){function a(){}function b(){}function c(){this._callback}PhoneGap.plugins=PhoneGap.plugins||{};window.plugins=window.plugins||{};a._onLocationChange=function(a){window.plugins.childBrowser.onLocationChange(a)};a._onClose=function(){window.plugins.childBrowser.onClose()};a._onOpenExternal=function(){window.plugins.childBrowser.onOpenExternal()};a.prototype.showWebPage=function(a){if(null===b||"undefined"===b)var b={showLocationBar:!0};PhoneGap.exec(this._onEvent,this._onError,"ChildBrowserCommand",
"showWebPage",[a,b])};a.prototype.close=function(){PhoneGap.exec("ChildBrowserCommand.close")};PhoneGap.addConstructor(function(){PhoneGap.plugins.childBrowser=new a;window.plugins.childBrowser=PhoneGap.plugins.childBrowser});b.prototype.request=function(a,b,c){return PhoneGap.exec(b,c,"HTTPRequest","grabURL",[a])};b.prototype.requestInBackground=function(a,b,c){return PhoneGap.exec(b,c,"HTTPRequest","grabURLInBackground",[a])};PhoneGap.addConstructor(function(){PhoneGap.plugins.httpRequest=new b});
c.prototype.show=function(a,b){this._callback=b;PhoneGap.exec(this._selected,this._onError,"Picker","show",[a])};c.prototype._selected=function(a){this._callback&&this._callback(a)};c.prototype._onError=function(a){if("function"===typeof window.plugins.picker.onError)window.plugins.picker.onError(a)};PhoneGap.addConstructor(function(){PhoneGap.plugins.picker=new c;window.plugins.picker=PhoneGap.plugins.picker})})();(function(){var a=PhoneGap.plugins,b={},c={};b.ChildBrowser=c;c.go=function(b){a.childBrowser.showWebPage(b)};c={};b.Device=c;c.getUUID=function(){return device.uuid};c.getName=function(){return device.name};c.getVersion=function(){return window.device?device.version:null};c.getPhoneGapVersion=function(){return window.device?device.phonegap:null};c.overrideBackButton=function(){device&&"function"==typeof device.overrideBackButton&&device.overrideBackButton()};c.exitApp=function(){navigator.app&&"function"==
typeof navigator.app.exitApp?(console.log("app.exit"),navigator.app.exitApp()):device&&"function"==typeof device.exitApp&&(console.log("device.exit"),device.exitApp())};c={};b.Event=c;c.onPause=function(a){document.addEventListener("pause",a)};c.onResume=function(a){document.addEventListener("resume",a)};c.onBackKeyDown=function(a){document.addEventListener("backbutton",a)};c={};b.File=c;c.write=function(a,b,c,h){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(l){l.root.getFile(a,{create:!0},
function(a){a.createWriter(function(a){a.onwrite=function(){console.log("onwrite file");c()};a.write(b)},h)},h)},h)};c.read=function(a,b,c){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(h){h.root.getFile(a,{create:!1},function(a){a.file(function(a){var c=new FileReader;c.onloadend=function(a){console.log("Read as text");b(a.target.result)};c.readAsText(a)},c)},c)},c)};c={};b.Geolocation=c;c.getCurrentPosition=function(a,b){navigator.geolocation.getCurrentPosition(function(b){a(b.coords)},
function(a){b(a)},{timeout:15E3,enableHighAccuracy:!0})};c.getAddressFromGeo=function(b,c,e,h){a.httpRequest.requestInBackground("http://maps.google.com/maps/api/geocode/json?latlng="+b+","+c+"&language=zh-TW&sensor=true",function(a){console.log("getAddressFromGeo http success");a=JSON.parse(a);e(a)},function(a){console.log("getAddressFromGeo http failed");h(a)})};c={};b.Picker=c;c.showPicker=function(b,c,e,h,l){var m={};m.dependent=b;m.components=c||[];m.setValues=e||[];m.maximunWordsInLine=24;m.rect=
l||[];a.picker.show(m,function(a){h(a)})};window.myapp=window.myapp||{};window.myapp.PG=b})();var i18n=function(){var a={},b={DST:-4,format:"D, d F Y H:i:s",AM:"AM",PM:"PM"};Date.prototype.format=function(a){var b="",c=Date.replaceChars,h="";c.reload();for(var l=0;l<a.length;l++)h=a.charAt(l),b+=c[h]?c[h].call(this):h;return b};Date.replaceChars={reload:function(){Date.replaceChars.shortMonths=a.hasOwnProperty("shortMonths")?a.shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",");Date.replaceChars.longMonths=a.hasOwnProperty("longMonths")?a.longMonths:"January,February,March,April,May,June,July,August,September,October,November,December".split(",");
Date.replaceChars.shortDays=a.hasOwnProperty("shortDays")?a.shortDays:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",");Date.replaceChars.longDays=a.hasOwnProperty("longDays")?a.longDays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(",")},shortMonths:[],longMonths:[],shortDays:[],longDays:[],d:function(){return(10>this.getUTCDate()?"0":"")+this.getUTCDate()},D:function(){return Date.replaceChars.shortDays[this.getUTCDay()]},j:function(){return this.getUTCDate()},l:function(){return Date.replaceChars.longDays[this.getUTCDay()]},
N:function(){return this.getDay()+1},S:function(){return 1===this.getUTCDate()%10&&11!==this.getUTCDate()?"st":2===this.getUTCDate()%10&&12!==this.getUTCDate()?"nd":3==this.getUTCDate()%10&&13!=this.getUTCDate()?"rd":"th"},w:function(){return this.getUTCDay()},z:function(){return""},W:function(){return""},F:function(){return Date.replaceChars.longMonths[this.getUTCMonth()]},m:function(){return(9>this.getUTCMonth()?"0":"")+(this.getUTCMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getUTCMonth()]},
n:function(){return this.getUTCMonth()+1},t:function(){return""},L:function(){return""},o:function(){return""},Y:function(){return this.getUTCFullYear()},y:function(){return(""+this.getUTCFullYear()).substr(2)},a:function(){var c=a.hasOwnProperty("setting")?a.setting:b;return 12>this.getUTCHours()?c.AM:c.PM},A:function(){var c=a.hasOwnProperty("setting")?a.setting:b;return 12>this.getUTCHours()?c.AM:c.PM},B:function(){return""},g:function(){return this.getUTCHours()%12||12},G:function(){return this.getUTCHours()},
h:function(){return(10>(this.getUTCHours()%12||12)?"0":"")+(this.getUTCHours()%12||12)},H:function(){return(10>this.getUTCHours()?"0":"")+this.getUTCHours()},i:function(){return(10>this.getUTCMinutes()?"0":"")+this.getUTCMinutes()},s:function(){return(10>this.getUTCSeconds()?"0":"")+this.getUTCSeconds()},e:function(){return""},I:function(){return""},O:function(){return(0>-this.getTimezoneOffset()?"-":"+")+(10>Math.abs(this.getTimezoneOffset()/60)?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},
T:function(){var a=this.getUTCMonth();this.setMonth(0);var b=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");this.setMonth(a);return b},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return""},r:function(){return this.toString()},U:function(){return this.getUTCTime()/1E3}};var c=function(a,b,c){var h,b=parseInt(b,10);"string"===typeof c&&(c=c.split(/\D/),--c[1],h=new Date(c.join(",")));h="object"===typeof h?h:c;switch(a){case "y":h.setFullYear(h.getFullYear()+b);break;case "m":h.setMonth(h.getMonth()+
b);break;case "d":h.setDate(h.getDate()+b);break;case "w":h.setDate(h.getDate()+7*b);break;case "h":h.setHours(h.getHours()+b);break;case "n":h.setMinutes(h.getMinutes()+b);break;case "s":h.setSeconds(h.getSeconds()+b);break;case "l":h.setMilliseconds(h.getMilliseconds()+b)}return h};return{set:function(b){a=b},datetime:function(d){var g=a.hasOwnProperty("setting")?a.setting:b;return(g.format?c("h",g.DST,d?new Date(d):new Date):d?new Date(d):new Date).format(g.format)},formatDate:function(d,g){var e=
a.hasOwnProperty("setting")?a.setting:b;return(e.format?c("h",e.DST,d?new Date(d):new Date):d?new Date(d):new Date).format(g)},_:function(b){try{var b=b.toString()||"",c=arguments,e=0<c.length?RegExp("%([1-"+c.length.toString()+"])","g"):null;return(""+(a.hasOwnProperty(b)?a[b]:b)).replace(e,function(a,b){return c[b]})}catch(h){}}}}();(function(a){String.prototype.trim===a&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});Array.prototype.reduce===a&&(Array.prototype.reduce=function(b){if(this===void 0||this===null)throw new TypeError;var c=Object(this),d=c.length>>>0,g=0,e;if(typeof b!="function")throw new TypeError;if(d==0&&arguments.length==1)throw new TypeError;if(arguments.length>=2)e=arguments[1];else{do{if(g in c){e=c[g++];break}if(++g>=d)throw new TypeError;}while(1)}for(;g<d;){g in c&&
(e=b.call(a,e,c[g],g,c));g++}return e})})();
var Zepto=function(){function a(a){return"[object Function]"==F.call(a)}function b(a){return a instanceof Object}function c(b){var c,f;if("[object Object]"!==F.call(b))return!1;f=a(b.constructor)&&b.constructor.prototype;if(!f||!hasOwnProperty.call(f,"isPrototypeOf"))return!1;for(c in b);return c===o||hasOwnProperty.call(b,c)}function d(a){return a instanceof Array}function g(a){return"number"==typeof a.length}function e(a){return a.filter(function(a){return a!==o&&null!==a})}function h(a){return a.replace(/::/g,
"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(a){return a in B?B[a]:B[a]=RegExp("(^|\\s)"+a+"(\\s|$)")}function m(a,b){return b===o?n(a):n(a).filter(b)}function p(b,c,f,k){return a(c)?c.call(b,f,k):c}function u(a,b,c){var f=a%2?b:b.parentNode;f?f.insertBefore(c,!a?b.nextSibling:1==a?f.firstChild:2==a?b:null):n(c).remove()}function t(a,b){b(a);for(var c in a.childNodes)t(a.childNodes[c],b)}var o,q,n,s,x=[],z=x.slice,r=
window.document,C={},B={},f=r.defaultView.getComputedStyle,j={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},D=/^\s*<(\w+|!)[^>]*>/,E=[1,3,8,9,11],G=r.createElement("table"),k=r.createElement("tr"),A={tr:r.createElement("tbody"),tbody:G,thead:G,tfoot:G,td:k,th:k,"*":r.createElement("div")},w=/complete|loaded|interactive/,H=/^\.([\w-]+)$/,L=/^#([\w-]+)$/,J=/^[\w-]+$/,F={}.toString,y={},K,I,M=r.createElement("div");y.matches=function(a,b){if(!a||1!==a.nodeType)return!1;
var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var f;f=a.parentNode;(c=!f)&&(f=M).appendChild(a);f=~y.qsa(f,b).indexOf(a);c&&M.removeChild(a);return f};K=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})};I=function(a){return a.filter(function(b,c){return a.indexOf(b)==c})};y.fragment=function(a,b){b===o&&(b=D.test(a)&&RegExp.$1);b in A||(b="*");var c=A[b];c.innerHTML=""+a;return n.each(z.call(c.childNodes),
function(){c.removeChild(this)})};y.Z=function(a,b){a=a||[];a.__proto__=arguments.callee.prototype;a.selector=b||"";return a};y.isZ=function(a){return a instanceof y.Z};y.init=function(b,f){if(b){if(a(b))return n(r).ready(b);if(y.isZ(b))return b;var k;if(d(b))k=e(b);else if(c(b))k=[n.extend({},b)],b=null;else if(0<=E.indexOf(b.nodeType)||b===window)k=[b],b=null;else if(D.test(b))k=y.fragment(b.trim(),RegExp.$1),b=null;else{if(f!==o)return n(f).find(b);k=y.qsa(r,b)}return y.Z(k,b)}return y.Z()};n=
function(a,b){return y.init(a,b)};n.extend=function(a){z.call(arguments,1).forEach(function(b){for(q in b)b[q]!==o&&(a[q]=b[q])});return a};y.qsa=function(a,b){var c;return a===r&&L.test(b)?(c=a.getElementById(RegExp.$1))?[c]:x:1!==a.nodeType&&9!==a.nodeType?x:z.call(H.test(b)?a.getElementsByClassName(RegExp.$1):J.test(b)?a.getElementsByTagName(b):a.querySelectorAll(b))};n.isFunction=a;n.isObject=b;n.isArray=d;n.isPlainObject=c;n.inArray=function(a,b,c){return x.indexOf.call(b,a,c)};n.trim=function(a){return a.trim()};
n.uuid=0;n.map=function(a,b){var c,f=[],k;if(g(a))for(k=0;k<a.length;k++)c=b(a[k],k),null!=c&&f.push(c);else for(k in a)c=b(a[k],k),null!=c&&f.push(c);return 0<f.length?[].concat.apply([],f):f};n.each=function(a,b){var c;if(g(a))for(c=0;c<a.length&&!1!==b.call(a[c],c,a[c]);c++);else for(c in a)if(!1===b.call(a[c],c,a[c]))break;return a};n.fn={forEach:x.forEach,reduce:x.reduce,push:x.push,indexOf:x.indexOf,concat:x.concat,map:function(a){return n.map(this,function(b,c){return a.call(b,c,b)})},slice:function(){return n(z.apply(this,
arguments))},ready:function(a){w.test(r.readyState)?a(n):r.addEventListener("DOMContentLoaded",function(){a(n)},!1);return this},get:function(a){return a===o?z.call(this):this[a]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){this.forEach(function(b,c){a.call(b,c,b)});return this},filter:function(a){return n([].filter.call(this,function(b){return y.matches(b,
a)}))},add:function(a,b){return n(I(this.concat(n(a,b))))},is:function(a){return 0<this.length&&y.matches(this[0],a)},not:function(b){var c=[];if(a(b)&&b.call!==o)this.each(function(a){b.call(this,a)||c.push(this)});else{var f="string"==typeof b?this.filter(b):g(b)&&a(b.item)?z.call(b):n(b);this.forEach(function(a){0>f.indexOf(a)&&c.push(a)})}return n(c)},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!b(a)?a:n(a)},last:function(){var a=this[this.length-
1];return a&&!b(a)?a:n(a)},find:function(a){var b;b=1==this.length?y.qsa(this[0],a):this.map(function(){return y.qsa(this,a)});return n(b)},closest:function(a,b){for(var c=this[0];c&&!y.matches(c,a);)c=c!==b&&c!==r&&c.parentNode;return n(c)},parents:function(a){for(var b=[],c=this;0<c.length;)c=n.map(c,function(a){if((a=a.parentNode)&&a!==r&&0>b.indexOf(a))return b.push(a),a});return m(b,a)},parent:function(a){return m(I(this.pluck("parentNode")),a)},children:function(a){return m(this.map(function(){return z.call(this.children)}),
a)},siblings:function(a){return m(this.map(function(a,b){return z.call(b.parentNode.children).filter(function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return this.map(function(){return this[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null);if("none"==f(this,"").getPropertyValue("display")){var a=this.style,b=this.nodeName,c,k;C[b]||(c=r.createElement(b),r.body.appendChild(c),k=
f(c,"").getPropertyValue("display"),c.parentNode.removeChild(c),"none"==k&&(k="block"),C[b]=k);a.display=C[b]}})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return this.each(function(){n(this).wrapAll(n(a)[0].cloneNode(!1))})},wrapAll:function(a){this[0]&&(n(this[0]).before(a=n(a)),a.append(this));return this},unwrap:function(){this.parent().each(function(){n(this).replaceWith(n(this).children())});return this},clone:function(){return n(this.map(function(){return this.cloneNode(!0)}))},
hide:function(){return this.css("display","none")},toggle:function(a){return(a===o?"none"==this.css("display"):a)?this.show():this.hide()},prev:function(){return n(this.pluck("previousElementSibling"))},next:function(){return n(this.pluck("nextElementSibling"))},html:function(a){return a===o?0<this.length?this[0].innerHTML:null:this.each(function(b){var c=this.innerHTML;n(this).empty().append(p(this,a,b,c))})},text:function(a){return a===o?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=
a})},attr:function(a,c){var f;return"string"==typeof a&&c===o?0==this.length||1!==this[0].nodeType?o:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(f=this[0].getAttribute(a))&&a in this[0]?this[0][a]:f:this.each(function(f){if(1===this.nodeType)if(b(a))for(q in a)this.setAttribute(q,a[q]);else this.setAttribute(a,p(this,c,f,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&this.removeAttribute(a)})},prop:function(a,b){return b===o?this[0]?this[0][a]:
o:this.each(function(c){this[a]=p(this,b,c,this[a])})},data:function(a,b){var c=this.attr("data-"+h(a),b);return null!==c?c:o},val:function(a){return a===o?0<this.length?this[0].value:o:this.each(function(b){this.value=p(this,a,b,this.value)})},offset:function(){if(0==this.length)return null;var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:a.width,height:a.height}},css:function(a,b){if(b===o&&"string"==typeof a)return 0==this.length?o:
this[0].style[K(a)]||f(this[0],"").getPropertyValue(a);var c="";for(q in a)"string"==typeof a[q]&&""==a[q]?this.each(function(){this.style.removeProperty(h(q))}):c+=h(q)+":"+("number"==typeof a[q]&&!j[h(q)]?a[q]+"px":a[q])+";";"string"==typeof a&&(""==b?this.each(function(){this.style.removeProperty(h(a))}):c=h(a)+":"+("number"==typeof b&&!j[h(a)]?b+"px":b));return this.each(function(){this.style.cssText+=";"+c})},index:function(a){return a?this.indexOf(n(a)[0]):this.parent().children().indexOf(this[0])},
hasClass:function(a){return 1>this.length?!1:l(a).test(this[0].className)},addClass:function(a){return this.each(function(b){s=[];var c=this.className;p(this,a,b,c).split(/\s+/g).forEach(function(a){n(this).hasClass(a)||s.push(a)},this);s.length&&(this.className+=(c?" ":"")+s.join(" "))})},removeClass:function(a){return this.each(function(b){if(a===o)return this.className="";s=this.className;p(this,a,b,s).split(/\s+/g).forEach(function(a){s=s.replace(l(a)," ")});this.className=s.trim()})},toggleClass:function(a,
b){return this.each(function(c){c=p(this,a,c,this.className);(b===o?!n(this).hasClass(c):b)?n(this).addClass(c):n(this).removeClass(c)})}};["width","height"].forEach(function(a){n.fn[a]=function(b){var c,f=a.replace(/./,function(a){return a[0].toUpperCase()});return b===o?this[0]==window?window["inner"+f]:this[0]==r?r.documentElement["offset"+f]:(c=this.offset())&&c[a]:this.each(function(c){var f=n(this);f.css(a,p(this,b,c,f[a]()))})}});["after","prepend","before","append"].forEach(function(a,c){n.fn[a]=
function(){var a=n.map(arguments,function(a){return b(a)?a:y.fragment(a)});if(1>a.length)return this;var f=this.length,k=1<f,I=2>c;return this.each(function(b,d){for(var j=0;j<a.length;j++){var l=a[I?a.length-j-1:j];t(l,function(a){null!=a.nodeName&&"SCRIPT"===a.nodeName.toUpperCase()&&(!a.type||"text/javascript"===a.type)&&window.eval.call(window,a.innerHTML)});k&&b<f-1&&(l=l.cloneNode(!0));u(c,d,l)}})};n.fn[c%2?a+"To":"insert"+(c?"Before":"After")]=function(b){n(b)[a](this);return this}});y.Z.prototype=
n.fn;y.camelize=K;y.uniq=I;n.zepto=y;return n}();window.Zepto=Zepto;"$"in window||(window.$=Zepto);
(function(a){function b(a){return a._zid||(a._zid=u++)}function c(a,c,l,m){c=d(c);if(c.ns)var e=RegExp("(?:^| )"+c.ns.replace(" "," .* ?")+"(?: |$)");return(p[b(a)]||[]).filter(function(a){return a&&(!c.e||a.e==c.e)&&(!c.ns||e.test(a.ns))&&(!l||b(a.fn)===b(l))&&(!m||a.sel==m)})}function d(a){a=(""+a).split(".");return{e:a[0],ns:a.slice(1).sort().join(" ")}}function g(b,c,d){a.isObject(b)?a.each(b,d):b.split(/\s/).forEach(function(a){d(a,c)})}function e(c,l,m,e,n,h){var h=!!h,f=b(c),j=p[f]||(p[f]=
[]);g(l,m,function(b,f){var l=n&&n(f,b),k=l||f,A=function(a){var b=k.apply(c,[a].concat(a.data));!1===b&&a.preventDefault();return b},l=a.extend(d(b),{fn:f,proxy:A,sel:e,del:l,i:j.length});j.push(l);c.addEventListener(l.e,A,h)})}function h(a,d,l,m){var e=b(a);g(d||"",l,function(b,f){c(a,b,f,m).forEach(function(b){delete p[e][b.i];a.removeEventListener(b.e,b.proxy,!1)})})}function l(b){var c=a.extend({originalEvent:b},b);a.each(n,function(a,d){c[a]=function(){this[d]=o;return b[a].apply(b,arguments)};
c[d]=q});return c}function m(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var b=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0;b.call(this)}}}var p={},u=1,t={};t.click=t.mousedown=t.mouseup=t.mousemove="MouseEvents";a.event={add:e,remove:h};a.proxy=function(c,d){if(a.isFunction(c)){var l=function(){return c.apply(d,arguments)};l._zid=b(c);return l}if("string"==typeof d)return a.proxy(c[d],c);throw new TypeError("expected function");};a.fn.bind=function(a,b){return this.each(function(){e(this,
a,b)})};a.fn.unbind=function(a,b){return this.each(function(){h(this,a,b)})};a.fn.one=function(a,b){return this.each(function(c,d){e(this,a,b,null,function(a,b){return function(){var c=a.apply(d,arguments);h(d,b,a);return c}})})};var o=function(){return!0},q=function(){return!1},n={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(b,c,d){var m=!1;if("blur"==c||"focus"==c)a.iswebkit?c="blur"==
c?"focusout":"focus"==c?"focusin":c:m=!0;return this.each(function(g,p){e(p,c,d,b,function(c){return function(d){var D,m=a(d.target).closest(b,p).get(0);if(m)return D=a.extend(l(d),{currentTarget:m,liveFired:p}),c.apply(m,[D].concat([].slice.call(arguments,1)))}},m)})};a.fn.undelegate=function(a,b,c){return this.each(function(){h(this,b,c,a)})};a.fn.live=function(b,c){a(document.body).delegate(this.selector,b,c);return this};a.fn.die=function(b,c){a(document.body).undelegate(this.selector,b,c);return this};
a.fn.on=function(b,c,d){return void 0==c||a.isFunction(c)?this.bind(b,c):this.delegate(c,b,d)};a.fn.off=function(b,c,d){return void 0==c||a.isFunction(c)?this.unbind(b,c):this.undelegate(c,b,d)};a.fn.trigger=function(b,c){"string"==typeof b&&(b=a.Event(b));m(b);b.data=c;return this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(b)})};a.fn.triggerHandler=function(b,d){var m,e;this.each(function(g,p){m=l("string"==typeof b?a.Event(b):b);m.data=d;m.target=p;a.each(c(p,b.type||b),function(a,
b){e=b.proxy(m);if(m.isImmediatePropagationStopped())return!1})});return e};"focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,change,select,keydown,keypress,keyup,error".split(",").forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}});["focus","blur"].forEach(function(b){a.fn[b]=function(a){if(a)this.bind(b,a);else if(this.length)try{this.get(0)[b]()}catch(c){}return this}});a.Event=function(a,b){var c=document.createEvent(t[a]||"Events"),
d=!0;if(b)for(var l in b)"bubbles"==l?d=!!b[l]:c[l]=b[l];c.initEvent(a,d,!0,null,null,null,null,null,null,null,null,null,null,null,null);return c}})(Zepto);
(function(a){function b(a){var b=this.os={},g=this.browser={},e=a.match(/WebKit\/([\d.]+)/),h=a.match(/(Android)\s+([\d.]+)/),l=a.match(/(iPad).*OS\s([\d_]+)/),m=!l&&a.match(/(iPhone\sOS)\s([\d_]+)/),p=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=p&&a.match(/TouchPad/),t=a.match(/Kindle\/([\d.]+)/),o=a.match(/Silk\/([\d._]+)/),q=a.match(/(BlackBerry).*Version\/([\d.]+)/);if(g.webkit=!!e)g.version=e[1];h&&(b.android=!0,b.version=h[2]);m&&(b.ios=b.iphone=!0,b.version=m[2].replace(/_/g,"."));l&&(b.ios=b.ipad=
!0,b.version=l[2].replace(/_/g,"."));p&&(b.webos=!0,b.version=p[2]);u&&(b.touchpad=!0);q&&(b.blackberry=!0,b.version=q[2]);t&&(b.kindle=!0,b.version=t[1]);o&&(g.silk=!0,g.version=o[1]);!o&&b.android&&a.match(/Kindle Fire/)&&(g.silk=!0)}b.call(a,navigator.userAgent);a.__detect=b})(Zepto);
(function(a,b){var c="",d,g=window.document.createElement("div"),e=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,h={};a.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(a,m){if(g.style[a+"TransitionProperty"]!==b)return c="-"+a.toLowerCase()+"-",d=m,!1});h[c+"transition-property"]=h[c+"transition-duration"]=h[c+"transition-timing-function"]=h[c+"animation-name"]=h[c+"animation-duration"]="";a.fx={off:d===b&&g.style.transitionProperty===b,cssPrefix:c,transitionEnd:d?
d+"TransitionEnd":"transitionend",animationEnd:d?d+"AnimationEnd":"animationend"};a.fn.animate=function(b,c,d,e){a.isObject(c)&&(d=c.easing,e=c.complete,c=c.duration);c&&(c/=1E3);return this.anim(b,c,d,e)};a.fn.anim=function(d,m,g,u){var t,o={},q,n=this,s,x=a.fx.transitionEnd;m===b&&(m=0.4);a.fx.off&&(m=0);if("string"==typeof d)o[c+"animation-name"]=d,o[c+"animation-duration"]=m+"s",x=a.fx.animationEnd;else{for(q in d)e.test(q)?(t||(t=[]),t.push(q+"("+d[q]+")")):o[q]=d[q];t&&(o[c+"transform"]=t.join(" "));
!a.fx.off&&"object"===typeof d&&(o[c+"transition-property"]=Object.keys(d).join(", "),o[c+"transition-duration"]=m+"s",o[c+"transition-timing-function"]=g||"linear")}s=function(b){if("undefined"!==typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(x,arguments.callee)}a(this).css(h);u&&u.call(this)};0<m&&this.bind(x,s);setTimeout(function(){n.css(o);0>=m&&setTimeout(function(){n.each(function(){s.call(this)})},0)},0);return this};g=null})(Zepto);
(function(a){function b(b,c,f,k){if(b.global)return b=c||q,f=a.Event(f),a(b).trigger(f,k),!f.defaultPrevented}function c(c){c.global&&0===a.active++&&b(c,null,"ajaxStart")}function d(a,c){var f=c.context;if(!1===c.beforeSend.call(f,a,c)||!1===b(c,f,"ajaxBeforeSend",[a,c]))return!1;b(c,f,"ajaxSend",[a,c])}function g(a,c,f){var k=f.context;f.success.call(k,a,"success",c);b(f,k,"ajaxSuccess",[c,f,a]);h("success",c,f)}function e(a,c,f,k){var d=k.context;k.error.call(d,f,c,a);b(k,d,"ajaxError",[f,k,a]);
h(c,f,k)}function h(c,f,d){var k=d.context;d.complete.call(k,f,c);b(d,k,"ajaxComplete",[f,d]);d.global&&!--a.active&&b(d,null,"ajaxStop")}function l(){}function m(a){return a&&(a==B?"html":a==C?"json":z.test(a)?"script":r.test(a)&&"xml")||"text"}function p(b){o(b.data)&&(b.data=a.param(b.data));if(b.data&&(!b.type||"GET"==b.type.toUpperCase()))b.url=(b.url+"&"+b.data).replace(/[&?]{1,2}/,"?")}function u(b,c,f,k){var d=a.isArray(c);a.each(c,function(c,l){k&&(c=f?k:k+"["+(d?"":c)+"]");!k&&d?b.add(l.name,
l.value):(f?a.isArray(l):o(l))?u(b,l,f,c):b.add(c,l)})}var t=0,o=a.isObject,q=window.document,n,s,x=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,z=/^(?:text|application)\/javascript/i,r=/^(?:text|application)\/xml/i,C="application/json",B="text/html",f=/^\s*$/;a.active=0;a.ajaxJSONP=function(b){var c="jsonp"+ ++t,f=q.createElement("script"),k={abort:function(){a(f).remove();c in window&&(window[c]=l);h("abort",k,b)}},d;b.error&&(f.onerror=function(){k.abort();b.error()});window[c]=function(l){clearTimeout(d);
a(f).remove();delete window[c];g(l,k,b)};p(b);f.src=b.url.replace(/=\?/,"="+c);a("head").append(f);0<b.timeout&&(d=setTimeout(function(){k.abort();h("timeout",k,b)},b.timeout));return k};a.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:C,xml:"application/xml, text/xml",html:B,text:"text/plain"},crossDomain:!1,timeout:0};a.ajax=function(b){var j=
a.extend({},b||{});for(n in a.ajaxSettings)void 0===j[n]&&(j[n]=a.ajaxSettings[n]);c(j);j.crossDomain||(j.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(j.url)&&RegExp.$2!=window.location.host);var h=j.dataType,b=/=\?/.test(j.url);if("jsonp"==h||b)return b||(j.url=(j.url+"&callback=?").replace(/[&?]{1,2}/,"?")),a.ajaxJSONP(j);j.url||(j.url=window.location.toString());p(j);if(!1===j.cache){var b=(new Date).getTime(),k=j.url.replace(/([?&])_=[^&]*/,"$1_="+b);j.url=k+(k===j.url?(/\?/.test(j.url)?"&":"?")+
"_="+b:"")}var b=j.accepts[h],k={},A=/^([\w-]+:)\/\//.test(j.url)?RegExp.$1:window.location.protocol,w=a.ajaxSettings.xhr(),H;j.crossDomain||(k["X-Requested-With"]="XMLHttpRequest");b&&(k.Accept=b,-1<b.indexOf(",")&&(b=b.split(",",2)[0]),w.overrideMimeType&&w.overrideMimeType(b));if(j.contentType||j.data&&"GET"!=j.type.toUpperCase())k["Content-Type"]=j.contentType||"application/x-www-form-urlencoded";j.headers=a.extend(k,j.headers||{});w.onreadystatechange=function(){if(w.readyState==4){clearTimeout(H);
var a,b=false;if(w.status>=200&&w.status<300||w.status==304||w.status==0&&A=="file:"){h=h||m(w.getResponseHeader("content-type"));a=w.responseText;try{h=="script"?(0,eval)(a):h=="xml"?a=w.responseXML:h=="json"&&(a=f.test(a)?null:JSON.parse(a))}catch(c){b=c}b?e(b,"parsererror",w,j):g(a,w,j)}else e(null,"error",w,j)}};w.open(j.type,j.url,"async"in j?j.async:!0);for(s in j.headers)w.setRequestHeader(s,j.headers[s]);if(!1===d(w,j))return w.abort(),!1;0<j.timeout&&(H=setTimeout(function(){w.onreadystatechange=
l;w.abort();e(null,"timeout",w,j)},j.timeout));w.send(j.data?j.data:null);return w};a.get=function(b,c){return a.ajax({url:b,success:c})};a.post=function(b,c,f,k){a.isFunction(c)&&(k=k||f,f=c,c=null);return a.ajax({type:"POST",url:b,data:c,success:f,dataType:k})};a.getJSON=function(b,c){return a.ajax({url:b,success:c,dataType:"json"})};a.fn.load=function(b,c){if(!this.length)return this;var f=this,k=b.split(/\s/),d;1<k.length&&(b=k[0],d=k[1]);a.get(b,function(b){f.html(d?a(q.createElement("div")).html(b.replace(x,
"")).find(d).html():b);c&&c.call(f)});return this};var j=encodeURIComponent;a.param=function(a,b){var c=[];c.add=function(a,b){this.push(j(a)+"="+j(b))};u(c,a,b);return c.join("&").replace("%20","+")}})(Zepto);
(function(a){a.fn.serializeArray=function(){var b=[],c;a(Array.prototype.slice.call(this.get(0).elements)).each(function(){c=a(this);var d=c.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=d&&"reset"!=d&&"button"!=d&&("radio"!=d&&"checkbox"!=d||this.checked)&&b.push({name:c.attr("name"),value:c.val()})});return b};a.fn.serialize=function(){var a=[];this.serializeArray().forEach(function(c){a.push(encodeURIComponent(c.name)+"="+encodeURIComponent(c.value))});return a.join("&")};
a.fn.submit=function(b){b?this.bind("submit",b):this.length&&(b=a.Event("submit"),this.eq(0).trigger(b),b.defaultPrevented||this.get(0).submit());return this}})(Zepto);
(function(a){function b(a,b,c,d){var e=Math.abs(a-b),g=Math.abs(c-d);return e>=g?0<a-b?"Left":"Right":0<c-d?"Up":"Down"}function c(){e=null;d.last&&(d.el.trigger("longTap"),d={})}var d={},g,e;a(document).ready(function(){var h,l;a(document.body).bind("touchstart",function(b){h=Date.now();l=h-(d.last||h);d.el=a("tagName"in b.touches[0].target?b.touches[0].target:b.touches[0].target.parentNode);g&&clearTimeout(g);d.x1=b.touches[0].pageX;d.y1=b.touches[0].pageY;0<l&&250>=l&&(d.isDoubleTap=!0);d.last=
h;e=setTimeout(c,750)}).bind("touchmove",function(a){e&&clearTimeout(e);e=null;d.x2=a.touches[0].pageX;d.y2=a.touches[0].pageY}).bind("touchend",function(){e&&clearTimeout(e);e=null;d.isDoubleTap?(d.el.trigger("doubleTap"),d={}):d.x2&&30<Math.abs(d.x1-d.x2)||d.y2&&30<Math.abs(d.y1-d.y2)?(d.el.trigger("swipe")&&d.el.trigger("swipe"+b(d.x1,d.x2,d.y1,d.y2)),d={}):"last"in d&&(d.el.trigger("tap"),g=setTimeout(function(){g=null;d.el.trigger("singleTap");d={}},250))}).bind("touchcancel",function(){g&&clearTimeout(g);
e&&clearTimeout(e);e=g=null;d={}})});"swipe,swipeLeft,swipeRight,swipeUp,swipeDown,doubleTap,tap,singleTap,longTap".split(",").forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})})(Zepto);(function(){function a(b,c,k){if(b===c)return 0!==b||1/b==1/c;if(null==b||null==c)return b===c;b._chain&&(b=b._wrapped);c._chain&&(c=c._wrapped);if(b.isEqual&&f.isFunction(b.isEqual))return b.isEqual(c);if(c.isEqual&&f.isFunction(c.isEqual))return c.isEqual(b);var d=m.call(b);if(d!=m.call(c))return!1;switch(d){case "[object String]":return b==""+c;case "[object Number]":return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case "[object Date]":case "[object Boolean]":return+b==+c;case "[object RegExp]":return b.source==
c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if("object"!=typeof b||"object"!=typeof c)return!1;for(var j=k.length;j--;)if(k[j]==b)return!0;k.push(b);var j=0,l=!0;if("[object Array]"==d){if(j=b.length,l=j==c.length)for(;j--&&(l=j in b==j in c&&a(b[j],c[j],k)););}else{if("constructor"in b!="constructor"in c||b.constructor!=c.constructor)return!1;for(var A in b)if(f.has(b,A)&&(j++,!(l=f.has(c,A)&&a(b[A],c[A],k))))break;if(l){for(A in c)if(f.has(c,A)&&!j--)break;
l=!j}}k.pop();return l}var b=this,c=b._,d={},g=Array.prototype,e=Object.prototype,h=g.slice,l=g.unshift,m=e.toString,p=e.hasOwnProperty,u=g.forEach,t=g.map,o=g.reduce,q=g.reduceRight,n=g.filter,s=g.every,x=g.some,z=g.indexOf,r=g.lastIndexOf,e=Array.isArray,C=Object.keys,B=Function.prototype.bind,f=function(a){return new F(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=f),exports._=f):b._=f;f.VERSION="1.3.2";var j=f.each=f.forEach=function(a,
b,c){if(null!=a)if(u&&a.forEach===u)a.forEach(b,c);else if(a.length===+a.length)for(var k=0,j=a.length;k<j&&!(k in a&&b.call(c,a[k],k,a)===d);k++);else for(k in a)if(f.has(a,k)&&b.call(c,a[k],k,a)===d)break};f.map=f.collect=function(a,b,c){var f=[];if(null==a)return f;if(t&&a.map===t)return a.map(b,c);j(a,function(a,k,d){f[f.length]=b.call(c,a,k,d)});a.length===+a.length&&(f.length=a.length);return f};f.reduce=f.foldl=f.inject=function(a,b,c,k){var d=2<arguments.length;null==a&&(a=[]);if(o&&a.reduce===
o)return k&&(b=f.bind(b,k)),d?a.reduce(b,c):a.reduce(b);j(a,function(a,f,j){d?c=b.call(k,c,a,f,j):(c=a,d=!0)});if(!d)throw new TypeError("Reduce of empty array with no initial value");return c};f.reduceRight=f.foldr=function(a,b,c,k){var d=2<arguments.length;null==a&&(a=[]);if(q&&a.reduceRight===q)return k&&(b=f.bind(b,k)),d?a.reduceRight(b,c):a.reduceRight(b);var j=f.toArray(a).reverse();k&&!d&&(b=f.bind(b,k));return d?f.reduce(j,b,c,k):f.reduce(j,b)};f.find=f.detect=function(a,b,c){var f;D(a,function(a,
k,d){if(b.call(c,a,k,d))return f=a,!0});return f};f.filter=f.select=function(a,b,c){var f=[];if(null==a)return f;if(n&&a.filter===n)return a.filter(b,c);j(a,function(a,k,d){b.call(c,a,k,d)&&(f[f.length]=a)});return f};f.reject=function(a,b,c){var f=[];if(null==a)return f;j(a,function(a,k,d){b.call(c,a,k,d)||(f[f.length]=a)});return f};f.every=f.all=function(a,b,c){var f=!0;if(null==a)return f;if(s&&a.every===s)return a.every(b,c);j(a,function(a,k,j){if(!(f=f&&b.call(c,a,k,j)))return d});return!!f};
var D=f.some=f.any=function(a,b,c){b||(b=f.identity);var k=!1;if(null==a)return k;if(x&&a.some===x)return a.some(b,c);j(a,function(a,f,j){if(k||(k=b.call(c,a,f,j)))return d});return!!k};f.include=f.contains=function(a,b){return null==a?!1:z&&a.indexOf===z?-1!=a.indexOf(b):D(a,function(a){return a===b})};f.invoke=function(a,b){var c=h.call(arguments,2);return f.map(a,function(a){return(f.isFunction(b)?b||a:a[b]).apply(a,c)})};f.pluck=function(a,b){return f.map(a,function(a){return a[b]})};f.max=function(a,
b,c){if(!b&&f.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&f.isEmpty(a))return-Infinity;var k={computed:-Infinity};j(a,function(a,f,d){f=b?b.call(c,a,f,d):a;f>=k.computed&&(k={value:a,computed:f})});return k.value};f.min=function(a,b,c){if(!b&&f.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&f.isEmpty(a))return Infinity;var k={computed:Infinity};j(a,function(a,f,d){f=b?b.call(c,a,f,d):a;f<k.computed&&(k={value:a,computed:f})});return k.value};f.shuffle=function(a){var b=
[],c;j(a,function(a,f){c=Math.floor(Math.random()*(f+1));b[f]=b[c];b[c]=a});return b};f.sortBy=function(a,b,c){var k=f.isFunction(b)?b:function(a){return a[b]};return f.pluck(f.map(a,function(a,b,f){return{value:a,criteria:k.call(c,a,b,f)}}).sort(function(a,b){var c=a.criteria,f=b.criteria;return void 0===c?1:void 0===f?-1:c<f?-1:c>f?1:0}),"value")};f.groupBy=function(a,b){var c={},k=f.isFunction(b)?b:function(a){return a[b]};j(a,function(a,b){var f=k(a,b);(c[f]||(c[f]=[])).push(a)});return c};f.sortedIndex=
function(a,b,c){c||(c=f.identity);for(var k=0,d=a.length;k<d;){var j=k+d>>1;c(a[j])<c(b)?k=j+1:d=j}return k};f.toArray=function(a){return!a?[]:f.isArray(a)||f.isArguments(a)?h.call(a):a.toArray&&f.isFunction(a.toArray)?a.toArray():f.values(a)};f.size=function(a){return f.isArray(a)?a.length:f.keys(a).length};f.first=f.head=f.take=function(a,b,c){return null!=b&&!c?h.call(a,0,b):a[0]};f.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))};f.last=function(a,b,c){return null!=b&&!c?
h.call(a,Math.max(a.length-b,0)):a[a.length-1]};f.rest=f.tail=function(a,b,c){return h.call(a,null==b||c?1:b)};f.compact=function(a){return f.filter(a,function(a){return!!a})};f.flatten=function(a,b){return f.reduce(a,function(a,c){if(f.isArray(c))return a.concat(b?c:f.flatten(c));a[a.length]=c;return a},[])};f.without=function(a){return f.difference(a,h.call(arguments,1))};f.uniq=f.unique=function(a,b,c){var c=c?f.map(a,c):a,k=[];3>a.length&&(b=!0);f.reduce(c,function(c,d,j){if(b?f.last(c)!==d||
!c.length:!f.include(c,d))c.push(d),k.push(a[j]);return c},[]);return k};f.union=function(){return f.uniq(f.flatten(arguments,!0))};f.intersection=f.intersect=function(a){var b=h.call(arguments,1);return f.filter(f.uniq(a),function(a){return f.every(b,function(b){return 0<=f.indexOf(b,a)})})};f.difference=function(a){var b=f.flatten(h.call(arguments,1),!0);return f.filter(a,function(a){return!f.include(b,a)})};f.zip=function(){for(var a=h.call(arguments),b=f.max(f.pluck(a,"length")),c=Array(b),k=
0;k<b;k++)c[k]=f.pluck(a,""+k);return c};f.indexOf=function(a,b,c){if(null==a)return-1;var k;if(c)return c=f.sortedIndex(a,b),a[c]===b?c:-1;if(z&&a.indexOf===z)return a.indexOf(b);c=0;for(k=a.length;c<k;c++)if(c in a&&a[c]===b)return c;return-1};f.lastIndexOf=function(a,b){if(null==a)return-1;if(r&&a.lastIndexOf===r)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1};f.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);for(var c=arguments[2]||1,f=Math.max(Math.ceil((b-
a)/c),0),k=0,d=Array(f);k<f;)d[k++]=a,a+=c;return d};var E=function(){};f.bind=function(a,b){var c,k;if(a.bind===B&&B)return B.apply(a,h.call(arguments,1));if(!f.isFunction(a))throw new TypeError;k=h.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,k.concat(h.call(arguments)));E.prototype=a.prototype;var f=new E,d=a.apply(f,k.concat(h.call(arguments)));return Object(d)===d?d:f}};f.bindAll=function(a){var b=h.call(arguments,1);0==b.length&&(b=f.functions(a));j(b,function(b){a[b]=
f.bind(a[b],a)});return a};f.memoize=function(a,b){var c={};b||(b=f.identity);return function(){var k=b.apply(this,arguments);return f.has(c,k)?c[k]:c[k]=a.apply(this,arguments)}};f.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};f.defer=function(a){return f.delay.apply(f,[a,1].concat(h.call(arguments,1)))};f.throttle=function(a,b){var c,k,d,j,l,A,m=f.debounce(function(){l=j=!1},b);return function(){c=this;k=arguments;d||(d=setTimeout(function(){d=
null;l&&a.apply(c,k);m()},b));j?l=!0:A=a.apply(c,k);m();j=!0;return A}};f.debounce=function(a,b,c){var f;return function(){var k=this,d=arguments;c&&!f&&a.apply(k,d);clearTimeout(f);f=setTimeout(function(){f=null;c||a.apply(k,d)},b)}};f.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;return c=a.apply(this,arguments)}};f.wrap=function(a,b){return function(){var c=[a].concat(h.call(arguments,0));return b.apply(this,c)}};f.compose=function(){var a=arguments;return function(){for(var b=
arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};f.after=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};f.keys=C||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)f.has(a,c)&&(b[b.length]=c);return b};f.values=function(a){return f.map(a,f.identity)};f.functions=f.methods=function(a){var b=[],c;for(c in a)f.isFunction(a[c])&&b.push(c);return b.sort()};f.extend=function(a){j(h.call(arguments,1),function(b){for(var c in b)a[c]=
b[c]});return a};f.pick=function(a){var b={};j(f.flatten(h.call(arguments,1)),function(c){c in a&&(b[c]=a[c])});return b};f.defaults=function(a){j(h.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])});return a};f.clone=function(a){return!f.isObject(a)?a:f.isArray(a)?a.slice():f.extend({},a)};f.tap=function(a,b){b(a);return a};f.isEqual=function(b,c){return a(b,c,[])};f.isEmpty=function(a){if(null==a)return!0;if(f.isArray(a)||f.isString(a))return 0===a.length;for(var b in a)if(f.has(a,
b))return!1;return!0};f.isElement=function(a){return!!(a&&1==a.nodeType)};f.isArray=e||function(a){return"[object Array]"==m.call(a)};f.isObject=function(a){return a===Object(a)};f.isArguments=function(a){return"[object Arguments]"==m.call(a)};f.isArguments(arguments)||(f.isArguments=function(a){return!(!a||!f.has(a,"callee"))});f.isFunction=function(a){return"[object Function]"==m.call(a)};f.isString=function(a){return"[object String]"==m.call(a)};f.isNumber=function(a){return"[object Number]"==
m.call(a)};f.isFinite=function(a){return f.isNumber(a)&&isFinite(a)};f.isNaN=function(a){return a!==a};f.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==m.call(a)};f.isDate=function(a){return"[object Date]"==m.call(a)};f.isRegExp=function(a){return"[object RegExp]"==m.call(a)};f.isNull=function(a){return null===a};f.isUndefined=function(a){return void 0===a};f.has=function(a,b){return p.call(a,b)};f.noConflict=function(){b._=c;return this};f.identity=function(a){return a};f.times=
function(a,b,c){for(var f=0;f<a;f++)b.call(c,f)};f.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};f.result=function(a,b){if(null==a)return null;var c=a[b];return f.isFunction(c)?c.call(a):c};f.mixin=function(a){j(f.functions(a),function(b){K(b,f[b]=a[b])})};var G=0;f.uniqueId=function(a){var b=G++;return a?a+b:b};f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,
escape:/<%-([\s\S]+?)%>/g};var k=/.^/,A={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},w;for(w in A)A[A[w]]=w;var H=/\\|'|\r|\n|\t|\u2028|\u2029/g,L=/\\(\\|'|r|n|t|u2028|u2029)/g,J=function(a){return a.replace(L,function(a,b){return A[b]})};f.template=function(a,b,c){c=f.extend(f.templateSettings,c);a="__p+='"+a.replace(H,function(a){return"\\"+A[a]}).replace(c.escape||k,function(a,b){return"'+\n_.escape("+J(b)+")+\n'"}).replace(c.interpolate||k,function(a,b){return"'+\n("+
J(b)+")+\n'"}).replace(c.evaluate||k,function(a,b){return"';\n"+J(b)+"\n;__p+='"})+"';\n";c.variable||(a="with(obj||{}){\n"+a+"}\n");var a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n",d=new Function(c.variable||"obj","_",a);if(b)return d(b,f);b=function(a){return d.call(this,a,f)};b.source="function("+(c.variable||"obj")+"){\n"+a+"}";return b};f.chain=function(a){return f(a).chain()};var F=function(a){this._wrapped=a};f.prototype=F.prototype;
var y=function(a,b){return b?f(a).chain():a},K=function(a,b){F.prototype[a]=function(){var a=h.call(arguments);l.call(a,this._wrapped);return y(b.apply(f,a),this._chain)}};f.mixin(f);j("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=g[a];F.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var f=c.length;(a=="shift"||a=="splice")&&f===0&&delete c[0];return y(c,this._chain)}});j(["concat","join","slice"],function(a){var b=g[a];F.prototype[a]=function(){return y(b.apply(this._wrapped,
arguments),this._chain)}});F.prototype.chain=function(){this._chain=!0;return this};F.prototype.value=function(){return this._wrapped}}).call(this);(function(){var a=this,b=a.Backbone,c=Array.prototype.slice,d=Array.prototype.splice,g;g="undefined"!==typeof exports?exports:a.Backbone={};g.VERSION="0.9.2";var e=a._;!e&&"undefined"!==typeof require&&(e=require("underscore"));var h=a.jQuery||a.Zepto||a.ender;g.setDomLibrary=function(a){h=a};g.noConflict=function(){a.Backbone=b;return this};g.emulateHTTP=!1;g.emulateJSON=!1;var l=/\s+/,m=g.Events={on:function(a,b,c){var f,d,j,m,e;if(!b)return this;a=a.split(l);for(f=this._callbacks||(this._callbacks=
{});d=a.shift();)j=(e=f[d])?e.tail:{},j.next=m={},j.context=c,j.callback=b,f[d]={tail:m,next:e?e.next:j};return this},off:function(a,b,c){var f,d,j,m,D,g;if(d=this._callbacks){if(!a&&!b&&!c)return delete this._callbacks,this;for(a=a?a.split(l):e.keys(d);f=a.shift();)if(j=d[f],delete d[f],j&&(b||c))for(m=j.tail;(j=j.next)!==m;)if(D=j.callback,g=j.context,b&&D!==b||c&&g!==c)this.on(f,D,g);return this}},trigger:function(a){var b,f,d,j,m,e;if(!(d=this._callbacks))return this;m=d.all;a=a.split(l);for(e=
c.call(arguments,1);b=a.shift();){if(f=d[b])for(j=f.tail;(f=f.next)!==j;)f.callback.apply(f.context||this,e);if(f=m){j=f.tail;for(b=[b].concat(e);(f=f.next)!==j;)f.callback.apply(f.context||this,b)}}return this}};m.bind=m.on;m.unbind=m.off;var p=g.Model=function(a,b){var c;a||(a={});b&&b.parse&&(a=this.parse(a));if(c=E(this,"defaults"))a=e.extend({},c,a);b&&b.collection&&(this.collection=b.collection);this.attributes={};this._escapedAttributes={};this.cid=e.uniqueId("c");this.changed={};this._silent=
{};this._pending={};this.set(a,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=e.clone(this.attributes);this.initialize.apply(this,arguments)};e.extend(p.prototype,m,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return e.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;b=this.get(a);return this._escapedAttributes[a]=e.escape(null==
b?"":""+b)},has:function(a){return null!=this.get(a)},set:function(a,b,c){var f,d;e.isObject(a)||null==a?(f=a,c=b):(f={},f[a]=b);c||(c={});if(!f)return this;f instanceof p&&(f=f.attributes);if(c.unset)for(d in f)f[d]=void 0;if(!this._validate(f,c))return!1;this.idAttribute in f&&(this.id=f[this.idAttribute]);var b=c.changes={},j=this.attributes,l=this._escapedAttributes,m=this._previousAttributes||{};for(d in f){a=f[d];if(!e.isEqual(j[d],a)||c.unset&&e.has(j,d))delete l[d],(c.silent?this._silent:
b)[d]=!0;c.unset?delete j[d]:j[d]=a;!e.isEqual(m[d],a)||e.has(j,d)!=e.has(m,d)?(this.changed[d]=a,c.silent||(this._pending[d]=!0)):(delete this.changed[d],delete this._pending[d])}c.silent||this.change(c);return this},unset:function(a,b){(b||(b={})).unset=!0;return this.set(a,null,b)},clear:function(a){(a||(a={})).unset=!0;return this.set(e.clone(this.attributes),a)},fetch:function(a){var a=a?e.clone(a):{},b=this,c=a.success;a.success=function(f,d,j){if(!b.set(b.parse(f,j),a))return!1;c&&c(b,f)};
a.error=g.wrapError(a.error,b,a);return(this.sync||g.sync).call(this,"read",this,a)},save:function(a,b,c){var f,d;e.isObject(a)||null==a?(f=a,c=b):(f={},f[a]=b);c=c?e.clone(c):{};if(c.wait){if(!this._validate(f,c))return!1;d=e.clone(this.attributes)}a=e.extend({},c,{silent:!0});if(f&&!this.set(f,c.wait?a:c))return!1;var j=this,l=c.success;c.success=function(a,b,d){b=j.parse(a,d);c.wait&&(delete c.wait,b=e.extend(f||{},b));if(!j.set(b,c))return!1;l?l(j,a):j.trigger("sync",j,a,c)};c.error=g.wrapError(c.error,
j,c);b=this.isNew()?"create":"update";b=(this.sync||g.sync).call(this,b,this,c);c.wait&&this.set(d,a);return b},destroy:function(a){var a=a?e.clone(a):{},b=this,c=a.success,f=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return f(),!1;a.success=function(d){a.wait&&f();c?c(b,d):b.trigger("sync",b,d,a)};a.error=g.wrapError(a.error,b,a);var d=(this.sync||g.sync).call(this,"delete",this,a);a.wait||f();return d},url:function(){var a=E(this,"urlRoot")||E(this.collection,"url")||G();
return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(a){a||(a={});var b=this._changing;this._changing=!0;for(var c in this._silent)this._pending[c]=!0;var f=e.extend({},a.changes,this._silent);this._silent={};for(c in f)this.trigger("change:"+c,this,this.get(c),a);if(b)return this;for(;!e.isEmpty(this._pending);){this._pending=
{};this.trigger("change",this,a);for(c in this.changed)!this._pending[c]&&!this._silent[c]&&delete this.changed[c];this._previousAttributes=e.clone(this.attributes)}this._changing=!1;return this},hasChanged:function(a){return!arguments.length?!e.isEmpty(this.changed):e.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?e.clone(this.changed):!1;var b,c=!1,f=this._previousAttributes,d;for(d in a)if(!e.isEqual(f[d],b=a[d]))(c||(c={}))[d]=b;return c},previous:function(a){return!arguments.length||
!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return e.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;var a=e.extend({},this.attributes,a),c=this.validate(a,b);if(!c)return!0;b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b);return!1}});var u=g.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);b.comparator&&(this.comparator=b.comparator);
this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,{silent:!0,parse:b.parse})};e.extend(u.prototype,m,{model:p,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},add:function(a,b){var c,f,j,l,m,D={},g={},p=[];b||(b={});a=e.isArray(a)?a.slice():[a];c=0;for(f=a.length;c<f;c++){if(!(j=a[c]=this._prepareModel(a[c],b)))throw Error("Can't add an invalid model to a collection");l=j.cid;m=j.id;D[l]||this._byCid[l]||null!=m&&(g[m]||this._byId[m])?
p.push(c):D[l]=g[m]=j}for(c=p.length;c--;)a.splice(p[c],1);c=0;for(f=a.length;c<f;c++)(j=a[c]).on("all",this._onModelEvent,this),this._byCid[j.cid]=j,null!=j.id&&(this._byId[j.id]=j);this.length+=f;d.apply(this.models,[null!=b.at?b.at:this.models.length,0].concat(a));this.comparator&&this.sort({silent:!0});if(b.silent)return this;c=0;for(f=this.models.length;c<f;c++)if(D[(j=this.models[c]).cid])b.index=c,j.trigger("add",j,this,b);return this},remove:function(a,b){var c,f,d,j;b||(b={});a=e.isArray(a)?
a.slice():[a];c=0;for(f=a.length;c<f;c++)if(j=this.getByCid(a[c])||this.get(a[c]))delete this._byId[j.id],delete this._byCid[j.cid],d=this.indexOf(j),this.models.splice(d,1),this.length--,b.silent||(b.index=d,j.trigger("remove",j,this,b)),this._removeReference(j);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,b);return a},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:0},b));return a},
shift:function(a){var b=this.at(0);this.remove(b,a);return b},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return e.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var b=e.bind(this.comparator,this);1==this.comparator.length?
this.models=this.sortBy(b):this.models.sort(b);a.silent||this.trigger("reset",this,a);return this},pluck:function(a){return e.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]);b||(b={});for(var c=0,f=this.models.length;c<f;c++)this._removeReference(this.models[c]);this._reset();this.add(a,e.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(f,
d,j){b[a.add?"add":"reset"](b.parse(f,j),a);c&&c(b,f)};a.error=g.wrapError(a.error,b,a);return(this.sync||g.sync).call(this,"read",this,a)},create:function(a,b){var c=this,b=b?e.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var f=b.success;b.success=function(d,j){b.wait&&c.add(d,b);f?f(d,j):d.trigger("sync",a,j,b)};a.save(null,b);return a},parse:function(a){return a},chain:function(){return e(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId=
{};this._byCid={}},_prepareModel:function(a,b){b||(b={});a instanceof p?a.collection||(a.collection=this):(b.collection=this,a=new this.model(a,b),a._validate(a.attributes,b)||(a=!1));return a},_removeReference:function(a){this==a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,f){("add"==a||"remove"==a)&&c!=this||("destroy"==a&&this.remove(b,f),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,
arguments))}});e.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(a){u.prototype[a]=function(){return e[a].apply(e,[this.models].concat(e.toArray(arguments)))}});var t=g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},o=/:\w+/g,
q=/\*\w+/g,n=/[-[\]{}()+?.,\\^$|#\s]/g;e.extend(t.prototype,m,{initialize:function(){},route:function(a,b,c){g.history||(g.history=new s);e.isRegExp(a)||(a=this._routeToRegExp(a));c||(c=this[b]);g.history.route(a,e.bind(function(f){f=this._extractParameters(a,f);c&&c.apply(this,f);this.trigger.apply(this,["route:"+b].concat(f));g.history.trigger("route",this,b,f)},this));return this},navigate:function(a,b){g.history.navigate(a,b)},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes)a.unshift([b,
this.routes[b]]);b=0;for(var c=a.length;b<c;b++)this.route(a[b][0],a[b][1],this[a[b][1]])}},_routeToRegExp:function(a){a=a.replace(n,"\\$&").replace(o,"([^/]+)").replace(q,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var s=g.History=function(){this.handlers=[];e.bindAll(this,"checkUrl")},x=/^[#\/]/,z=/msie [\w.]+/;s.started=!1;e.extend(s.prototype,m,{interval:50,getHash:function(a){return(a=(a?a.location:window.location).href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||b){var a=window.location.pathname,c=window.location.search;c&&(a+=c)}else a=this.getHash();a=decodeURIComponent(a);a.indexOf(this.options.root)||(a=a.substr(this.options.root.length));return a.replace(x,"")},start:function(a){if(s.started)throw Error("Backbone.history has already been started");s.started=!0;this.options=e.extend({},{root:"/"},this.options,a);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;
this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),b=document.documentMode;if(b=z.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b))this.iframe=h('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?h(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!b?h(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=
setInterval(this.checkUrl,this.interval));this.fragment=a;a=window.location;b=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&b&&a.hash&&(this.fragment=this.getHash().replace(x,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},
stop:function(){h(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);s.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a==this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return e.any(this.handlers,
function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!s.started)return!1;if(!b||!0===b)b={trigger:b};var c=(a||"").replace(x,"");this.fragment!=c&&(this._hasPushState?(0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.getHash(this.iframe))&&(b.replace||
this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});var r=g.View=function(a){this.cid=e.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},C=/^(\S+)\s*(.*)$/,B="model,collection,el,id,attributes,className,tagName".split(",");
e.extend(r.prototype,m,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(a,b,c){a=document.createElement(a);b&&h(a).attr(b);c&&h(a).html(c);return a},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof h?a:h(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(a||(a=E(this,"events"))){this.undelegateEvents();
for(var b in a){var c=a[b];e.isFunction(c)||(c=this[a[b]]);if(!c)throw Error('Method "'+a[b]+'" does not exist');var f=b.match(C),d=f[1],f=f[2],c=e.bind(c,this),d=d+(".delegateEvents"+this.cid);""===f?this.$el.bind(d,c):this.$el.delegate(f,d,c)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=e.extend({},this.options,a));for(var b=0,c=B.length;b<c;b++){var f=B[b];a[f]&&(this[f]=a[f])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,
!1);else{var a=E(this,"attributes")||{};this.id&&(a.id=this.id);this.className&&(a["class"]=this.className);this.setElement(this.make(this.tagName,a),!1)}}});p.extend=u.extend=t.extend=r.extend=function(a,b){var c=D(this,a,b);c.extend=this.extend;return c};var f={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};g.sync=function(a,b,c){var d=f[a];c||(c={});var j={type:d,dataType:"json"};c.url||(j.url=E(b,"url")||G());if(!c.data&&b&&("create"==a||"update"==a))j.contentType="application/json",
j.data=JSON.stringify(b.toJSON());g.emulateJSON&&(j.contentType="application/x-www-form-urlencoded",j.data=j.data?{model:j.data}:{});if(g.emulateHTTP&&("PUT"===d||"DELETE"===d))g.emulateJSON&&(j.data._method=d),j.type="POST",j.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d)};"GET"!==j.type&&!g.emulateJSON&&(j.processData=!1);return h.ajax(e.extend(j,c))};g.wrapError=function(a,b,c){return function(f,d){d=f===b?d:f;a?a(b,d,c):b.trigger("error",b,d,c)}};var j=function(){},D=function(a,
b,c){var f;f=b&&b.hasOwnProperty("constructor")?b.constructor:function(){a.apply(this,arguments)};e.extend(f,a);j.prototype=a.prototype;f.prototype=new j;b&&e.extend(f.prototype,b);c&&e.extend(f,c);f.prototype.constructor=f;f.__super__=a.prototype;return f},E=function(a,b){return!a||!a[b]?null:e.isFunction(a[b])?a[b]():a[b]},G=function(){throw Error('A "url" property or function must be specified');}}).call(this);(function(){var a,b,c;"undefined"===typeof window?(a=require("underscore"),b=require("backbone"),c=module.exports=b):(a=window._,b=window.Backbone,c=window);b.Relational={showWarnings:!0};b.Semaphore={_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable)throw Error("Max permits acquired");this._permitsUsed++},release:function(){if(this._permitsUsed===0)throw Error("All permits released");this._permitsUsed--},isLocked:function(){return this._permitsUsed>
0},setAvailablePermits:function(a){if(this._permitsUsed>a)throw Error("Available permits cannot be less than used permits");this._permitsAvailable=a}};b.BlockingQueue=function(){this._queue=[]};a.extend(b.BlockingQueue.prototype,b.Semaphore,{_queue:null,add:function(a){this.isBlocked()?this._queue.push(a):a()},process:function(){for(;this._queue&&this._queue.length;)this._queue.shift()()},block:function(){this.acquire()},unblock:function(){this.release();this.isBlocked()||this.process()},isBlocked:function(){return this.isLocked()}});
b.Relational.eventQueue=new b.BlockingQueue;b.Store=function(){this._collections=[];this._reverseRelations=[]};a.extend(b.Store.prototype,b.Events,{_collections:null,_reverseRelations:null,addReverseRelation:function(b){if(!a.any(this._reverseRelations,function(c){return a.all(b,function(a,b){return a===c[b]})})&&b.model&&b.type){this._reverseRelations.push(b);if(!b.model.prototype.relations)b.model.prototype.relations=[];b.model.prototype.relations.push(b);this.retroFitRelation(b)}},retroFitRelation:function(a){this.getCollection(a.model).each(function(b){new a.type(b,
a)},this)},getCollection:function(b){var c=a.detect(this._collections,function(a){return b===a.model||b.constructor===a.model});c||(c=this._createCollection(b));return c},getObjectByName:function(b){b=a.reduce(b.split("."),function(a,b){return a[b]},c);return b!==c?b:null},_createCollection:function(a){var c;if(a instanceof b.RelationalModel)a=a.constructor;if(a.prototype instanceof b.RelationalModel.prototype.constructor){c=new b.Collection;c.model=a;this._collections.push(c)}return c},resolveIdForItem:function(c,
d){var e=a.isString(d)||a.isNumber(d)?d:null;if(e==null)d instanceof b.RelationalModel?e=d.id:a.isObject(d)&&(e=d[c.prototype.idAttribute]);return e},find:function(a,b){var c=this.resolveIdForItem(a,b),d=this.getCollection(a);return d&&d.get(c)},register:function(a){var b=a.collection,c=this.getCollection(a);c&&c.add(a);a.bind("destroy",this.unregister,this);a.collection=b},update:function(a){var b=this.getCollection(a);b._onModelEvent("change:"+a.idAttribute,a,b)},unregister:function(a){a.unbind("destroy",
this.unregister);var b=this.getCollection(a);b&&b.remove(a)}});b.Relational.store=new b.Store;b.Relation=function(c,d){this.instance=c;d=typeof d==="object"&&d||{};this.reverseRelation=a.defaults(d.reverseRelation||{},this.options.reverseRelation);this.reverseRelation.type=!a.isString(this.reverseRelation.type)?this.reverseRelation.type:b[this.reverseRelation.type]||b.Relational.store.getObjectByName(this.reverseRelation.type);this.model=d.model||this.instance.constructor;this.options=a.defaults(d,
this.options,b.Relation.prototype.options);this.key=this.options.key;this.keySource=this.options.keySource||this.key;this.keyDestination=this.options.keyDestination||this.options.keySource||this.key;this.relatedModel=this.options.relatedModel;if(a.isString(this.relatedModel))this.relatedModel=b.Relational.store.getObjectByName(this.relatedModel);if(!this.checkPreconditions())return false;if(c){this.keyContents=this.instance.get(this.keySource);this.key!==this.keySource&&this.instance.unset(this.keySource,
{silent:true});this.instance._relations.push(this)}!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key&&b.Relational.store.addReverseRelation(a.defaults({isAutoRelation:true,model:this.relatedModel,relatedModel:this.model,reverseRelation:this.options},this.reverseRelation));a.bindAll(this,"_modelRemovedFromCollection","_relatedModelAdded","_relatedModelRemoved");if(c){this.initialize();b.Relational.store.getCollection(this.instance).bind("relational:remove",this._modelRemovedFromCollection);
b.Relational.store.getCollection(this.relatedModel).bind("relational:add",this._relatedModelAdded).bind("relational:remove",this._relatedModelRemoved)}};b.Relation.extend=b.Model.extend;a.extend(b.Relation.prototype,b.Events,b.Semaphore,{options:{createModels:!0,includeInJSON:!0,isAutoRelation:!1},instance:null,key:null,keyContents:null,relatedModel:null,reverseRelation:null,related:null,_relatedModelAdded:function(a,b,c){var d=this;a.queue(function(){d.tryAddRelated(a,c)})},_relatedModelRemoved:function(a,
b,c){this.removeRelated(a,c)},_modelRemovedFromCollection:function(a){a===this.instance&&this.destroy()},checkPreconditions:function(){var c=this.instance,d=this.key,e=this.model,g=this.relatedModel,h=b.Relational.showWarnings&&typeof console!=="undefined";if(!e||!d||!g){h&&console.warn("Relation=%o; no model, key or relatedModel (%o, %o, %o)",this,e,d,g);return false}if(!(e.prototype instanceof b.RelationalModel.prototype.constructor)){h&&console.warn("Relation=%o; model does not inherit from Backbone.RelationalModel (%o)",
this,c);return false}if(!(g.prototype instanceof b.RelationalModel.prototype.constructor)){h&&console.warn("Relation=%o; relatedModel does not inherit from Backbone.RelationalModel (%o)",this,g);return false}if(this instanceof b.HasMany&&this.reverseRelation.type===b.HasMany.prototype.constructor){h&&console.warn("Relation=%o; relation is a HasMany, and the reverseRelation is HasMany as well.",this);return false}if(c&&c._relations.length&&a.any(c._relations,function(a){var b=this.reverseRelation.key&&
a.reverseRelation.key;return a.relatedModel===g&&a.key===d&&(!b||this.reverseRelation.key===a.reverseRelation.key)},this)){h&&console.warn("Relation=%o between instance=%o.%s and relatedModel=%o.%s already exists",this,c,d,g,this.reverseRelation.key);return false}return true},setRelated:function(b,c){this.related=b;this.instance.acquire();this.instance.set(this.key,b,a.defaults(c||{},{silent:true}));this.instance.release()},createModel:function(a){if(this.options.createModels&&typeof a==="object")return new this.relatedModel(a)},
_isReverseRelation:function(a){return a.instance instanceof this.relatedModel&&this.reverseRelation.key===a.key&&this.key===a.reverseRelation.key?true:false},getReverseRelations:function(b){var c=[],b=!a.isUndefined(b)?[b]:this.related&&(this.related.models||[this.related]);a.each(b,function(b){a.each(b.getRelations(),function(a){this._isReverseRelation(a)&&c.push(a)},this)},this);return c},sanitizeOptions:function(b){b=b?a.clone(b):{};if(b.silent){b=a.extend({},b,{silentChange:true});delete b.silent}return b},
unsanitizeOptions:function(b){b=b?a.clone(b):{};if(b.silentChange){b=a.extend({},b,{silent:true});delete b.silentChange}return b},destroy:function(){b.Relational.store.getCollection(this.instance).unbind("relational:remove",this._modelRemovedFromCollection);b.Relational.store.getCollection(this.relatedModel).unbind("relational:add",this._relatedModelAdded).unbind("relational:remove",this._relatedModelRemoved);a.each(this.getReverseRelations(),function(a){a.removeRelated(this.instance)},this)}});b.HasOne=
b.Relation.extend({options:{reverseRelation:{type:"HasMany"}},initialize:function(){a.bindAll(this,"onChange");this.instance.bind("relational:change:"+this.key,this.onChange);this.setRelated(this.findRelated({silent:true}));var b=this;a.each(b.getReverseRelations(),function(a){a.addRelated(b.instance)})},findRelated:function(c){var d=this.keyContents,e=null;if(d instanceof this.relatedModel)e=d;else if(d)(e=b.Relational.store.find(this.relatedModel,d))&&a.isObject(d)?e.set(d,c):e||(e=this.createModel(d));
return e},onChange:function(c,d,e){if(!this.isLocked()){this.acquire();var e=this.sanitizeOptions(e),g=(c=a.isUndefined(e._related))?this.related:e._related;if(c){this.keyContents=d;d instanceof this.relatedModel?this.related=d:d?this.setRelated(this.findRelated(e)):this.setRelated(null)}g&&this.related!==g&&a.each(this.getReverseRelations(g),function(a){a.removeRelated(this.instance,e)},this);a.each(this.getReverseRelations(),function(a){a.addRelated(this.instance,e)},this);if(!e.silentChange&&this.related!==
g){var h=this;b.Relational.eventQueue.add(function(){h.instance.trigger("update:"+h.key,h.instance,h.related,e)})}this.release()}},tryAddRelated:function(a,c){if(!this.related){var c=this.sanitizeOptions(c),d=this.keyContents;if(d){d=b.Relational.store.resolveIdForItem(this.relatedModel,d);a.id===d&&this.addRelated(a,c)}}},addRelated:function(a){if(a!==this.related){var b=this.related||null;this.setRelated(a);this.onChange(this.instance,a,{_related:b})}},removeRelated:function(a){if(this.related&&
a===this.related){var b=this.related||null;this.setRelated(null);this.onChange(this.instance,a,{_related:b})}}});b.HasMany=b.Relation.extend({collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:b.Collection,collectionKey:!0,collectionOptions:{}},initialize:function(){a.bindAll(this,"onChange","handleAddition","handleRemoval","handleReset");this.instance.bind("relational:change:"+this.key,this.onChange);this.collectionType=this.options.collectionType;if(a(this.collectionType).isString())this.collectionType=
b.Relational.store.getObjectByName(this.collectionType);if(!this.collectionType.prototype instanceof b.Collection.prototype.constructor)throw Error("collectionType must inherit from Backbone.Collection");this.keyContents instanceof b.Collection?this.setRelated(this._prepareCollection(this.keyContents)):this.setRelated(this._prepareCollection());this.findRelated({silent:true})},_getCollectionOptions:function(){return a.isFunction(this.options.collectionOptions)?this.options.collectionOptions(this.instance):
this.options.collectionOptions},_prepareCollection:function(a){this.related&&this.related.unbind("relational:add",this.handleAddition).unbind("relational:remove",this.handleRemoval).unbind("relational:reset",this.handleReset);if(!a||!(a instanceof b.Collection))a=new this.collectionType([],this._getCollectionOptions());a.model=this.relatedModel;if(this.options.collectionKey){var c=this.options.collectionKey===true?this.options.reverseRelation.key:this.options.collectionKey;if(a[c]&&a[c]!==this.instance)b.Relational.showWarnings&&
typeof console!=="undefined"&&console.warn("Relation=%o; collectionKey=%s already exists on collection=%o",this,c,this.options.collectionKey);else if(c)a[c]=this.instance}a.bind("relational:add",this.handleAddition).bind("relational:remove",this.handleRemoval).bind("relational:reset",this.handleReset);return a},findRelated:function(c){if(this.keyContents){var d=[];if(this.keyContents instanceof b.Collection)d=this.keyContents.models;else{this.keyContents=a.isArray(this.keyContents)?this.keyContents:
[this.keyContents];a.each(this.keyContents,function(e){var g=b.Relational.store.find(this.relatedModel,e);g&&a.isObject(e)?g.set(e,c):g||(g=this.createModel(e));g&&!this.related.getByCid(g)&&!this.related.get(g)&&d.push(g)},this)}if(d.length){c=this.unsanitizeOptions(c);this.related.add(d,c)}}},onChange:function(c,d,e){e=this.sanitizeOptions(e);this.keyContents=d;a.each(this.getReverseRelations(),function(a){a.removeRelated(this.instance,e)},this);if(d instanceof b.Collection){this._prepareCollection(d);
this.related=d}else{if(this.related instanceof b.Collection){c=this.related;c.reset([],{silent:true})}else c=this._prepareCollection();this.setRelated(c);this.findRelated(e)}a.each(this.getReverseRelations(),function(a){a.addRelated(this.instance,e)},this);var g=this;b.Relational.eventQueue.add(function(){!e.silentChange&&g.instance.trigger("update:"+g.key,g.instance,g.related,e)})},tryAddRelated:function(c,d){d=this.sanitizeOptions(d);!this.related.getByCid(c)&&!this.related.get(c)&&a.any(this.keyContents,
function(a){return(a=b.Relational.store.resolveIdForItem(this.relatedModel,a))&&a===c.id},this)&&this.related.add(c,d)},handleAddition:function(c,d,e){if(c instanceof b.Model){e=this.sanitizeOptions(e);a.each(this.getReverseRelations(c),function(a){a.addRelated(this.instance,e)},this);var g=this;b.Relational.eventQueue.add(function(){!e.silentChange&&g.instance.trigger("add:"+g.key,c,g.related,e)})}},handleRemoval:function(c,d,e){if(c instanceof b.Model){e=this.sanitizeOptions(e);a.each(this.getReverseRelations(c),
function(a){a.removeRelated(this.instance,e)},this);var g=this;b.Relational.eventQueue.add(function(){!e.silentChange&&g.instance.trigger("remove:"+g.key,c,g.related,e)})}},handleReset:function(a,c){var c=this.sanitizeOptions(c),d=this;b.Relational.eventQueue.add(function(){!c.silentChange&&d.instance.trigger("reset:"+d.key,d.related,c)})},addRelated:function(a,b){var c=this,b=this.unsanitizeOptions(b);a.queue(function(){c.related&&!c.related.getByCid(a)&&!c.related.get(a)&&c.related.add(a,b)})},
removeRelated:function(a,b){b=this.unsanitizeOptions(b);(this.related.getByCid(a)||this.related.get(a))&&this.related.remove(a,b)}});b.RelationalModel=b.Model.extend({relations:null,_relations:null,_isInitialized:!1,_deferProcessing:!1,_queue:null,constructor:function(c,d){var e=this;if(d&&d.collection){this._deferProcessing=true;var g=function(a){if(a===e){e._deferProcessing=false;e.processQueue();d.collection.unbind("relational:add",g)}};d.collection.bind("relational:add",g);a.defer(function(){g(e)})}this._queue=
new b.BlockingQueue;this._queue.block();b.Relational.eventQueue.block();b.Model.prototype.constructor.apply(this,arguments);b.Relational.eventQueue.unblock()},trigger:function(a){if(a.length>5&&"change"===a.substr(0,6)){var c=this,d=arguments;b.Relational.eventQueue.add(function(){b.Model.prototype.trigger.apply(c,d)})}else b.Model.prototype.trigger.apply(this,arguments);return this},initializeRelations:function(){this.acquire();this._relations=[];a.each(this.relations,function(c){var d=!a.isString(c.type)?
c.type:b[c.type]||b.Relational.store.getObjectByName(c.type);d&&d.prototype instanceof b.Relation.prototype.constructor?new d(this,c):b.Relational.showWarnings&&typeof console!=="undefined"&&console.warn("Relation=%o; missing or invalid type!",c)},this);this._isInitialized=true;this.release();this.processQueue()},updateRelations:function(b){this._isInitialized&&!this.isLocked()&&a.each(this._relations,function(a){var c=this.attributes[a.key];a.related!==c&&this.trigger("relational:change:"+a.key,
this,c,b||{})},this)},queue:function(a){this._queue.add(a)},processQueue:function(){this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()&&this._queue.unblock()},getRelation:function(b){return a.detect(this._relations,function(a){if(a.key===b)return true},this)},getRelations:function(){return this._relations},fetchRelated:function(c,d){d||(d={});var e,g=[],h=this.getRelation(c),o=h&&h.keyContents;if((o=o&&a.select(a.isArray(o)?o:[o],function(a){return(a=b.Relational.store.resolveIdForItem(h.relatedModel,
a))&&!b.Relational.store.find(h.relatedModel,a)},this))&&o.length){var q=a.map(o,function(a){if(typeof a==="object")a=new h.relatedModel(a);else{var b={};b[h.relatedModel.prototype.idAttribute]=a;a=new h.relatedModel(b)}return a},this);h.related instanceof b.Collection&&a.isFunction(h.related.url)&&(e=h.related.url(q));if(e&&e!==h.related.url()){e=a.defaults({error:function(){var b=arguments;a.each(q,function(a){a.trigger("destroy",a,a.collection,d);d.error&&d.error.apply(a,b)})},url:e},d,{add:true});
g=[h.related.fetch(e)]}else g=a.map(q,function(b){var c=a.defaults({error:function(){b.trigger("destroy",b,b.collection,d);d.error&&d.error.apply(b,arguments)}},d);return b.fetch(c)},this)}return g},set:function(c,d,e){b.Relational.eventQueue.block();var g;if(a.isObject(c)||c==null){g=c;e=d}else{g={};g[c]=d}var h=b.Model.prototype.set.apply(this,arguments);if(!this._isInitialized&&!this.isLocked()){b.Relational.store.register(this);this.initializeRelations()}else g&&this.idAttribute in g&&b.Relational.store.update(this);
g&&this.updateRelations(e);b.Relational.eventQueue.unblock();return h},unset:function(a,c){b.Relational.eventQueue.block();var d=b.Model.prototype.unset.apply(this,arguments);this.updateRelations(c);b.Relational.eventQueue.unblock();return d},clear:function(a){b.Relational.eventQueue.block();var c=b.Model.prototype.clear.apply(this,arguments);this.updateRelations(a);b.Relational.eventQueue.unblock();return c},change:function(a){var c=this,d=arguments;b.Relational.eventQueue.add(function(){b.Model.prototype.change.apply(c,
d)})},clone:function(){var b=a.clone(this.attributes);a.isUndefined(b[this.idAttribute])||(b[this.idAttribute]=null);a.each(this.getRelations(),function(a){delete b[a.key]});return new this.constructor(b)},toJSON:function(){if(this.isLocked())return this.id;this.acquire();var c=b.Model.prototype.toJSON.call(this);a.each(this._relations,function(d){var e=c[d.key];d.options.includeInJSON===true&&e&&a.isFunction(e.toJSON)?c[d.keyDestination]=e.toJSON():a.isString(d.options.includeInJSON)?e instanceof
b.Collection?c[d.keyDestination]=e.pluck(d.options.includeInJSON):e instanceof b.Model&&(c[d.keyDestination]=e.get(d.options.includeInJSON)):delete c[d.key];d.keyDestination!==d.key&&delete c[d.key]},this);this.release();return c}});a.extend(b.RelationalModel.prototype,b.Semaphore);var d=b.Collection.prototype.__add=b.Collection.prototype.add;b.Collection.prototype.add=function(c,e){e||(e={});a.isArray(c)||(c=[c]);var g=[];a.each(c,function(a){if(!(a instanceof b.Model)){var c=b.Relational.store.find(this.model,
a[this.model.prototype.idAttribute]);if(c){c.set(c.parse?c.parse(a):a,e);a=c}else a=b.Collection.prototype._prepareModel.call(this,a,e)}a instanceof b.Model&&!this.get(a)&&!this.getByCid(a)&&g.push(a)},this);if(g.length){d.call(this,g,e);a.each(g,function(a){this.trigger("relational:add",a,this,e)},this)}return this};var g=b.Collection.prototype.__remove=b.Collection.prototype.remove;b.Collection.prototype.remove=function(c,d){d||(d={});a.isArray(c)||(c=[c]);a.each(c,function(a){a=this.getByCid(a)||
this.get(a);if(a instanceof b.Model){g.call(this,a,d);this.trigger("relational:remove",a,this,d)}},this);return this};var e=b.Collection.prototype.__reset=b.Collection.prototype.reset;b.Collection.prototype.reset=function(a,b){e.call(this,a,b);this.trigger("relational:reset",a,b);return this};var h=b.Collection.prototype.__trigger=b.Collection.prototype.trigger;b.Collection.prototype.trigger=function(a){if(a==="add"||a==="remove"||a==="reset"){var c=this,d=arguments;b.Relational.eventQueue.add(function(){h.apply(c,
d)})}else h.apply(this,arguments);return this};b.RelationalModel.extend=function(c,d){var e=b.Model.extend.apply(this,arguments);a.each(c&&c.relations||[],function(c){if(c.reverseRelation){c.model=e;var d=true;if(a.isString(c.relatedModel))d=(d=b.Relational.store.getObjectByName(c.relatedModel))&&d.prototype instanceof b.RelationalModel.prototype.constructor;var g=!a.isString(c.type)?c.type:b[c.type]||b.Relational.store.getObjectByName(c.type);d&&g&&g.prototype instanceof b.Relation.prototype.constructor&&
new g(null,c)}});return e}})();(function(){var a=Math,b=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":"",c=/android/gi.test(navigator.appVersion),d=/iphone|ipad/gi.test(navigator.appVersion),g=/playbook/gi.test(navigator.appVersion),e=/hp-tablet/gi.test(navigator.appVersion),h=/windows/gi.test(navigator.appVersion),l="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,m="ontouchstart"in window&&!e,p=b+"Transform"in document.documentElement.style,
u=d||g,t=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),o=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,q="onorientationchange"in window?
"orientationchange":"resize",n=m?"touchstart":"mousedown",s=m?"touchmove":"mousemove",x=m?"touchend":"mouseup",z=m?"touchcancel":"mouseup",r="Moz"==b?"DOMMouseScroll":"mousewheel",C="translate"+(l?"3d(":"("),B=l?",0)":")",g=function(a,j){var e=this,g;e.wrapper="object"==typeof a?a:document.getElementById(a);e.wrapper.style.overflow="hidden";e.scroller=e.wrapper.children[0];e.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,
topOffset:0,checkDOMChanges:!1,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:c,hideScrollbar:d,fadeScrollbar:d&&l,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(g in j)e.options[g]=j[g];e.x=e.options.x;
e.y=e.options.y;e.options.useTransform=p?e.options.useTransform:!1;e.options.hScrollbar=e.options.hScroll&&e.options.hScrollbar;e.options.vScrollbar=e.options.vScroll&&e.options.vScrollbar;e.options.zoom=e.options.useTransform&&e.options.zoom;e.options.useTransition=u&&e.options.useTransition;e.options.zoom&&c&&(C="translate(",B=")");e.scroller.style[b+"TransitionProperty"]=e.options.useTransform?"-"+b.toLowerCase()+"-transform":"top left";e.scroller.style[b+"TransitionDuration"]="0";e.scroller.style[b+
"TransformOrigin"]="0 0";e.options.useTransition&&(e.scroller.style[b+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");e.options.useTransform?e.scroller.style[b+"Transform"]=C+e.x+"px,"+e.y+"px"+B:e.scroller.style.cssText+=";position:absolute;top:"+e.y+"px;left:"+e.x+"px";e.options.useTransition&&(e.options.fixedScrollbar=!0);e.refresh();e._bind(q,window);e._bind(n);m||(e._bind("mouseout",e.wrapper),"none"!=e.options.wheelAction&&e._bind(r));e.options.checkDOMChanges&&(e.checkDOMTime=
setInterval(function(){e._checkDOMChanges()},500))};g.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){switch(a.type){case n:if(!m&&0!==a.button)break;this._start(a);break;case s:this._move(a);break;case x:case z:this._end(a);break;case q:this._resize();break;case r:this._wheel(a);break;case "mouseout":this._mouseout(a);break;case "webkitTransitionEnd":this._transitionEnd(a)}},_checkDOMChanges:function(){!this.moved&&
!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(c){var d=document,e;this[c+"Scrollbar"]?(this[c+"ScrollbarWrapper"]||(e=d.createElement("div"),this.options.scrollbarClass?e.className=this.options.scrollbarClass+c.toUpperCase():e.style.cssText="position:absolute;z-index:100;"+("h"==c?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+
(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),e.style.cssText+=";pointer-events:none;-"+b+"-transition-property:opacity;-"+b+"-transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(e),this[c+"ScrollbarWrapper"]=e,e=d.createElement("div"),this.options.scrollbarClass||(e.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+b+"-background-clip:padding-box;-"+
b+"-box-sizing:border-box;"+("h"==c?"height:100%":"width:100%")+";-"+b+"-border-radius:3px;border-radius:3px"),e.style.cssText+=";pointer-events:none;-"+b+"-transition-property:-"+b+"-transform;-"+b+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+b+"-transition-duration:0;-"+b+"-transform:"+C+"0,0"+B,this.options.useTransition&&(e.style.cssText+=";-"+b+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[c+"ScrollbarWrapper"].appendChild(e),this[c+"ScrollbarIndicator"]=
e),"h"==c?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=a.max(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW>>0,8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=a.max(this.vScrollbarSize*this.vScrollbarSize/
this.scrollerH>>0,8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(c,!0)):this[c+"ScrollbarWrapper"]&&(p&&(this[c+"ScrollbarIndicator"].style[b+"Transform"]=""),this[c+"ScrollbarWrapper"].parentNode.removeChild(this[c+"ScrollbarWrapper"]),this[c+"ScrollbarWrapper"]=null,this[c+"ScrollbarIndicator"]=null)},_resize:function(){var a=
this;setTimeout(function(){a.refresh()},c?200:0)},_pos:function(a,c){a=this.hScroll?a:0;c=this.vScroll?c:0;this.options.useTransform?this.scroller.style[b+"Transform"]=C+a+"px,"+c+"px"+B+" scale("+this.scale+")":(a>>=0,c>>=0,this.scroller.style.left=a+"px",this.scroller.style.top=c+"px");this.x=a;this.y=c;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(a,c){var d="h"==a?this.x:this.y;this[a+"Scrollbar"]&&(d*=this[a+"ScrollbarProp"],0>d?(this.options.fixedScrollbar||(d=this[a+
"ScrollbarIndicatorSize"]+(3*d>>0),8>d&&(d=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=d+"px"),d=0):d>this[a+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?d=this[a+"ScrollbarMaxScroll"]:(d=this[a+"ScrollbarIndicatorSize"]-(3*(d-this[a+"ScrollbarMaxScroll"])>>0),8>d&&(d=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=d+"px",d=this[a+"ScrollbarMaxScroll"]+(this[a+"ScrollbarIndicatorSize"]-d))),this[a+"ScrollbarWrapper"].style[b+"TransitionDelay"]="0",this[a+"ScrollbarWrapper"].style.opacity=
c&&this.options.hideScrollbar?"0":"1",this[a+"ScrollbarIndicator"].style[b+"Transform"]=C+("h"==a?d+"px,0":"0,"+d+"px")+B)},_start:function(c){var d=m?c.touches[0]:c,e,g;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,c);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&m&&1<c.touches.length&&(g=a.abs(c.touches[0].pageX-
c.touches[1].pageX),e=a.abs(c.touches[0].pageY-c.touches[1].pageY),this.touchesDistStart=a.sqrt(g*g+e*e),this.originX=a.abs(c.touches[0].pageX+c.touches[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=a.abs(c.touches[0].pageY+c.touches[1].pageY-2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,c));if(this.options.momentum&&(this.options.useTransform?(e=getComputedStyle(this.scroller,null)[b+"Transform"].replace(/[^0-9-.,]/g,"").split(","),g=1*
e[4],e=1*e[5]):(g=1*getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),e=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),g!=this.x||e!=this.y))this.options.useTransition?this._unbind("webkitTransitionEnd"):o(this.aniTime),this.steps=[],this._pos(g,e);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=d.pageX;this.pointY=d.pageY;this.startTime=c.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,
c);this._bind(s);this._bind(x);this._bind(z)}},_move:function(c){var d=m?c.touches[0]:c,e=d.pageX-this.pointX,g=d.pageY-this.pointY,h=this.x+e,k=this.y+g,n=c.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,c);if(this.options.zoom&&m&&1<c.touches.length)h=a.abs(c.touches[0].pageX-c.touches[1].pageX),k=a.abs(c.touches[0].pageY-c.touches[1].pageY),this.touchesDist=a.sqrt(h*h+k*k),this.zoomed=!0,d=1/this.touchesDistStart*this.touchesDist*this.scale,d<this.options.zoomMin?
d=0.5*this.options.zoomMin*Math.pow(2,d/this.options.zoomMin):d>this.options.zoomMax&&(d=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/d)),this.lastScale=d/this.scale,h=this.originX-this.originX*this.lastScale+this.x,k=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[b+"Transform"]=C+h+"px,"+k+"px"+B+" scale("+d+")",this.options.onZoom&&this.options.onZoom.call(this,c);else{this.pointX=d.pageX;this.pointY=d.pageY;if(0<h||h<this.maxScrollX)h=this.options.bounce?this.x+
e/2:0<=h||0<=this.maxScrollX?0:this.maxScrollX;if(k>this.minScrollY||k<this.maxScrollY)k=this.options.bounce?this.y+g/2:k>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=e;this.distY+=g;this.absDistX=a.abs(this.distX);this.absDistY=a.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(k=this.y,g=0):this.absDistY>this.absDistX+5&&(h=this.x,e=0)),this.moved=!0,this._pos(h,k),this.dirX=0<e?-1:0>e?1:0,this.dirY=
0<g?-1:0>g?1:0,300<n-this.startTime&&(this.startTime=n,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,c))}},_end:function(c){if(!(m&&0!=c.touches.length)){var d=this,e=m?c.changedTouches[0]:c,g,h,k={dist:0,time:0},n={dist:0,time:0},l=(c.timeStamp||Date.now())-d.startTime,o=d.x,r=d.y;d._unbind(s);d._unbind(x);d._unbind(z);d.options.onBeforeScrollEnd&&d.options.onBeforeScrollEnd.call(d,c);if(d.zoomed)o=d.scale*d.lastScale,o=Math.max(d.options.zoomMin,
o),o=Math.min(d.options.zoomMax,o),d.lastScale=o/d.scale,d.scale=o,d.x=d.originX-d.originX*d.lastScale+d.x,d.y=d.originY-d.originY*d.lastScale+d.y,d.scroller.style[b+"TransitionDuration"]="200ms",d.scroller.style[b+"Transform"]=C+d.x+"px,"+d.y+"px"+B+" scale("+d.scale+")",d.zoomed=!1,d.refresh(),d.options.onZoomEnd&&d.options.onZoomEnd.call(d,c);else{if(d.moved){if(300>l&&d.options.momentum){k=o?d._momentum(o-d.startX,l,-d.x,d.scrollerW-d.wrapperW+d.x,d.options.bounce?d.wrapperW:0):k;n=r?d._momentum(r-
d.startY,l,-d.y,0>d.maxScrollY?d.scrollerH-d.wrapperH+d.y-d.minScrollY:0,d.options.bounce?d.wrapperH:0):n;o=d.x+k.dist;r=d.y+n.dist;if(0<d.x&&0<o||d.x<d.maxScrollX&&o<d.maxScrollX)k={dist:0,time:0};if(d.y>d.minScrollY&&r>d.minScrollY||d.y<d.maxScrollY&&r<d.maxScrollY)n={dist:0,time:0}}k.dist||n.dist?(k=a.max(a.max(k.time,n.time),10),d.options.snap&&(n=o-d.absStartX,l=r-d.absStartY,a.abs(n)<d.options.snapThreshold&&a.abs(l)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(n=d._snap(o,
r),o=n.x,r=n.y,k=a.max(n.time,k))),d.scrollTo(o>>0,r>>0,k)):d.options.snap?(n=o-d.absStartX,l=r-d.absStartY,a.abs(n)<d.options.snapThreshold&&a.abs(l)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(n=d._snap(d.x,d.y),(n.x!=d.x||n.y!=d.y)&&d.scrollTo(n.x,n.y,n.time))):d._resetPos(200)}else m&&(d.doubleTapTimer&&d.options.zoom?(clearTimeout(d.doubleTapTimer),d.doubleTapTimer=null,d.options.onZoomStart&&d.options.onZoomStart.call(d,c),d.zoom(d.pointX,d.pointY,1==d.scale?d.options.doubleTapZoom:
1),d.options.onZoomEnd&&setTimeout(function(){d.options.onZoomEnd.call(d,c)},200)):d.doubleTapTimer=setTimeout(function(){d.doubleTapTimer=null;for(g=e.target;1!=g.nodeType;)g=g.parentNode;"SELECT"!=g.tagName&&"INPUT"!=g.tagName&&"TEXTAREA"!=g.tagName&&(h=document.createEvent("MouseEvents"),h.initMouseEvent("click",!0,!0,c.view,1,e.screenX,e.screenY,e.clientX,e.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null),h._fake=!0,g.dispatchEvent(h))},d.options.zoom?250:0)),d._resetPos(200);d.options.onTouchEnd&&
d.options.onTouchEnd.call(d,c)}}},_resetPos:function(a){var c=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,d=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;if(c==this.x&&d==this.y){if(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==b&&(this.hScrollbarWrapper.style[b+"TransitionDelay"]="300ms"),this.hScrollbarWrapper.style.opacity=
"0"),this.vScrollbar&&this.options.hideScrollbar)"webkit"==b&&(this.vScrollbarWrapper.style[b+"TransitionDelay"]="300ms"),this.vScrollbarWrapper.style.opacity="0"}else this.scrollTo(c,d,a||0)},_wheel:function(a){var b=this,c,d;if("wheelDeltaX"in a)h?(c=a.wheelDeltaX,d=a.wheelDeltaY):(c=a.wheelDeltaX/12,d=a.wheelDeltaY/12);else if("wheelDelta"in a)c=h?d=a.wheelDelta:d=a.wheelDelta/12;else if("detail"in a)c=d=3*-a.detail;else return;if("zoom"==b.options.wheelAction){if(d=b.scale*Math.pow(2,1/3*(d?d/
Math.abs(d):0)),d<b.options.zoomMin&&(d=b.options.zoomMin),d>b.options.zoomMax&&(d=b.options.zoomMax),d!=b.scale)!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,d,400),setTimeout(function(){b.wheelZoomCount--;!b.wheelZoomCount&&b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400)}else c=b.x+c,d=b.y+d,0<c?c=0:c<b.maxScrollX&&(c=b.maxScrollX),d>b.minScrollY?d=b.minScrollY:d<b.maxScrollY&&(d=b.maxScrollY),b.scrollTo(c,d,0)},_mouseout:function(a){var b=
a.relatedTarget;if(b)for(;b=b.parentNode;)if(b==this.wrapper)return;this._end(a)},_transitionEnd:function(a){a.target==this.scroller&&(this._unbind("webkitTransitionEnd"),this._startAni())},_startAni:function(){var b=this,c=b.x,d=b.y,e=Date.now(),g,h,n;b.animating||(b.steps.length?(g=b.steps.shift(),g.x==c&&g.y==d&&(g.time=0),b.animating=!0,b.moved=!0,b.options.useTransition)?(b._transitionTime(g.time),b._pos(g.x,g.y),b.animating=!1,g.time?b._bind("webkitTransitionEnd"):b._resetPos(0)):(n=function(){var l=
Date.now();if(l>=e+g.time){b._pos(g.x,g.y);b.animating=false;b.options.onAnimationEnd&&b.options.onAnimationEnd.call(b);b._startAni()}else{l=(l-e)/g.time-1;h=a.sqrt(1-l*l);l=(g.x-c)*h+c;b._pos(l,(g.y-d)*h+d);if(b.animating)b.aniTime=t(n)}},n()):b._resetPos(400))},_transitionTime:function(a){a+="ms";this.scroller.style[b+"TransitionDuration"]=a;this.hScrollbar&&(this.hScrollbarIndicator.style[b+"TransitionDuration"]=a);this.vScrollbar&&(this.vScrollbarIndicator.style[b+"TransitionDuration"]=a)},_momentum:function(b,
c,d,e,g){var c=a.abs(b)/c,h=c*c/0.0012;0<b&&h>d?(d+=g/(6/(6.0E-4*(h/c))),c=c*d/h,h=d):0>b&&h>e&&(e+=g/(6/(6.0E-4*(h/c))),c=c*e/h,h=e);return{dist:h*(0>b?-1:1),time:c/6.0E-4>>0}},_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;a!=this.wrapper&&(b*=this.scale,c*=this.scale);return{left:b,top:c}},_snap:function(b,c){var d,e,g;g=this.pagesX.length-1;d=0;for(e=this.pagesX.length;d<e;d++)if(b>=this.pagesX[d]){g=d;break}g==this.currPageX&&0<g&&
0>this.dirX&&g--;b=this.pagesX[g];e=(e=a.abs(b-this.pagesX[this.currPageX]))?500*(a.abs(this.x-b)/e):0;this.currPageX=g;g=this.pagesY.length-1;for(d=0;d<g;d++)if(c>=this.pagesY[d]){g=d;break}g==this.currPageY&&0<g&&0>this.dirY&&g--;c=this.pagesY[g];d=(d=a.abs(c-this.pagesY[this.currPageY]))?500*(a.abs(this.y-c)/d):0;this.currPageY=g;g=a.max(e,d)>>0;return{x:b,y:c,time:g||200}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,
this,!!c)},destroy:function(){this.scroller.style[b+"Transform"]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(q,window);this._unbind(n);this._unbind(s);this._unbind(x);this._unbind(z);this.options.hasTouch||(this._unbind("mouseout",this.wrapper),this._unbind(r));this.options.useTransition&&this._unbind("webkitTransitionEnd");this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},setOption:function(a){for(i in a)this.options[i]=
a[i];this.refresh()},refresh:function(a){console.log("refresh SCROLL by "+a);var c,d,e;d=a=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=this.scroller.offsetWidth*this.scale>>0;this.scrollerH=(this.scroller.offsetHeight+this.minScrollY)*this.scale>>0;this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+
this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;c=this._offset(this.wrapper);this.wrapperOffsetLeft=-c.left;this.wrapperOffsetTop=-c.top;if("string"==typeof this.options.snap){this.pagesX=
[];this.pagesY=[];e=this.scroller.querySelectorAll(this.options.snap);c=0;for(d=e.length;c<d;c++)a=this._offset(e[c]),a.left+=this.wrapperOffsetLeft,a.top+=this.wrapperOffsetTop,this.pagesX[c]=a.left<this.maxScrollX?this.maxScrollX:a.left*this.scale,this.pagesY[c]=a.top<this.maxScrollY?this.maxScrollY:a.top*this.scale}else if(this.options.snap){for(this.pagesX=[];a>=this.maxScrollX;)this.pagesX[d]=a,a-=this.wrapperW,d++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-
this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);d=a=0;for(this.pagesY=[];a>=this.maxScrollY;)this.pagesY[d]=a,a-=this.wrapperH,d++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[b+"TransitionDuration"]="0",this._resetPos(200))},scrollTo:function(a,b,c,d){var e=a;this.stop();e.length||(e=[{x:a,y:b,time:c,
relative:d}]);a=0;for(b=e.length;a<b;a++)e[a].relative&&(e[a].x=this.x-e[a].x,e[a].y=this.y-e[a].y),this.steps.push({x:e[a].x,y:e[a].y,time:e[a].time||0});this._startAni()},scrollToElement:function(b,c){var d;if(b=b.nodeType?b:this.scroller.querySelector(b))d=this._offset(b),d.left+=this.wrapperOffsetLeft,d.top+=this.wrapperOffsetTop,d.left=0<d.left?0:d.left<this.maxScrollX?this.maxScrollX:d.left,d.top=d.top>this.minScrollY?this.minScrollY:d.top<this.maxScrollY?this.maxScrollY:d.top,c=void 0===c?
a.max(2*a.abs(d.left),2*a.abs(d.top)):c,this.scrollTo(d.left,d.top,c)},scrollToPage:function(a,b,c){c=void 0===c?400:c;this.options.onScrollStart&&this.options.onScrollStart.call(this);if(this.options.snap)a="next"==a?this.currPageX+1:"prev"==a?this.currPageX-1:a,b="next"==b?this.currPageY+1:"prev"==b?this.currPageY-1:b,a=0>a?0:a>this.pagesX.length-1?this.pagesX.length-1:a,b=0>b?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b];else if(a*=
-this.wrapperW,b*=-this.wrapperH,a<this.maxScrollX&&(a=this.maxScrollX),b<this.maxScrollY)b=this.maxScrollY;this.scrollTo(a,b,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(s);this._unbind(x);this._unbind(z)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):o(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(a,c,d,e){var g=d/this.scale;this.options.useTransform&&(this.zoomed=!0,
e=void 0===e?200:e,a=a-this.wrapperOffsetLeft-this.x,c=c-this.wrapperOffsetTop-this.y,this.x=a-a*g+this.x,this.y=c-c*g+this.y,this.scale=d,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[b+"TransitionDuration"]=e+"ms",this.scroller.style[b+"Transform"]=C+this.x+"px,"+this.y+"px"+B+" scale("+d+")",this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&
!this.animating}};"undefined"!==typeof exports?exports.iScroll=g:window.iScroll=g})();(function(a){function b(a,c){if(a){this.element=a;this.options={};for(var d in b.defaults)this.options[d]=b.defaults[d];for(d in c)this.options[d]=c[d];this._create();this.build()}}function c(b,c,d){b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent&&(b["e"+c+d]=d,b[c+d]=function(){b["e"+c+d](a.event)},b.attachEvent("on"+c,b[c+d]))}function d(a,b,c){var d="height"!==b,e=d?a.offsetWidth:a.offsetHeight,h=d?"Left":"Top",l=d?"Right":"Bottom",d=t(a),f=parseFloat(d["padding"+h])||0,j=parseFloat(d["padding"+
l])||0,m=parseFloat(d["border"+h+"Width"])||0,p=parseFloat(d["border"+l+"Width"])||0,h=d["margin"+h],l=d["margin"+l];o||(h=g(a,d,h),l=g(a,d,l));h=parseFloat(h)||0;l=parseFloat(l)||0;if(0<e)c?e+=h+l:e-=f+j+m+p;else{e=d[b];if(0>e||null==e)e=a.style[b]||0;e=parseFloat(e)||0;c&&(e+=f+j+h+l+m+p)}return e}function g(a,b,c){if(-1===c.indexOf("%"))return c;var a=a.style,d=a.width;a.width=c;b=b.width;a.width=d;return b}var e=a.document,h="classList"in e.createElement("div"),l=h?function(a,b){return a.classList.contains(b)}:
function(a,b){return RegExp("(^|\\s+)"+b+"(\\s+|$)").test(a.className)},m=h?function(a,b){a.classList.add(b)}:function(a,b){l(a,b)||(a.className=a.className+" "+b)},p=h?function(a,b){a.classList.remove(b)}:function(a,b){a.className=a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," ")},u=e.defaultView,t=u&&u.getComputedStyle?function(a){return u.getComputedStyle(a,null)}:function(a){return a.currentStyle},h=e.getElementsByTagName("body")[0],e=e.createElement("div");e.style.marginTop="1%";h.appendChild(e);
var o="1%"!==t(e).marginTop;h.removeChild(e);var q=["position","height"];b.defaults={isResizable:!0,gutterWidth:0,isRTL:!1,isFitWidth:!1};b.prototype={_getBricks:function(a){for(var b,c=0,d=a.length;c<d;c++)b=a[c],b.style.position="absolute",m(b,"masonry-brick"),this.bricks.push(b)},_create:function(){this.reloadItems();var b=this.element.style;this._originalStyle={};for(var d=0,e=q.length;d<e;d++){var g=q[d];this._originalStyle[g]=b[g]||""}this.element.style.position="relative";this.horizontalDirection=
this.options.isRTL?"right":"left";this.offset={};b=t(this.element);d=this.options.isRTL?"paddingRight":"paddingLeft";this.offset.y=parseFloat(b.paddingTop)||0;this.offset.x=parseFloat(b[d])||0;this.isFluid=this.options.columnWidth&&"function"==typeof this.options.columnWidth;var h=this;setTimeout(function(){m(h.element,"masonry")});this.options.isResizable&&c(a,"resize",function(){h._handleResize()})},build:function(a){this._getColumns();this._reLayout(a)},_getColumns:function(){var a=d(this.options.isFitWidth?
this.element.parentNode:this.element,"width");this.columnWidth=this.isFluid?this.options.columnWidth(a):this.options.columnWidth||d(this.bricks[0],"width",!0)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},reloadItems:function(){this.bricks=[];this._getBricks(this.element.children)},_reLayout:function(a){var b=this.cols;for(this.colYs=[];b--;)this.colYs.push(0);this.layout(this.bricks,a)},layout:function(a,
b){for(var c,e,g,h,l,f,j=0,m=a.length;j<m;j++)if(c=a[j],1===c.nodeType){e=Math.ceil(d(c,"width",!0)/(this.columnWidth+this.options.gutterWidth));e=Math.min(e,this.cols);if(1===e)f=this.colYs;else{g=this.cols+1-e;f=[];for(l=0;l<g;l++)h=this.colYs.slice(l,l+e),f[l]=Math.max.apply(Math,h)}g=Math.min.apply(Math,f);e=0;for(l=f.length;e<l&&f[e]!==g;e++);c.style.top=g+this.offset.y+"px";c.style[this.horizontalDirection]=this.columnWidth*e+this.offset.x+"px";c=g+d(c,"height",!0);f=this.cols+1-l;for(l=0;l<
f;l++)this.colYs[e+l]=c}this.element.style.height=Math.max.apply(Math,this.colYs)+"px";if(this.options.isFitWidth){m=0;for(j=this.cols;--j&&0===this.colYs[j];)m++;this.element.style.width=(this.cols-m)*this.columnWidth-this.options.gutterWidth+"px"}b&&b.call(a)},_handleResize:function(){var a=this;this._resizeTimeout&&clearTimeout(this._resizeTimeout);this._resizeTimeout=setTimeout(function(){a.resize();a._resizeTimeout=null},100)},resize:function(){var a=this.cols;this._getColumns();(this.isFluid||
this.cols!==a)&&this._reLayout()},reload:function(a){this.reloadItems();this.build(a)},appended:function(a,b,c){var e=this,g=function(){e._appended(a,c)};if(b){for(var b=d(this.element,"height")+"px",h=0,l=a.length;h<l;h++)a[h].style.top=b;setTimeout(g,1)}else g()},_appended:function(a,b){this._getBricks(a);this.layout(a,b)},destroy:function(){for(var b,c=0,d=this.bricks.length;c<d;c++)b=this.bricks[c],b.style.position="",b.style.top="",b.style.left="",p(b,"masonry-brick");b=this.element.style;d=
q.length;for(c=0;c<d;c++){var e=q[c];b[e]=this._originalStyle[e]}p(this.element,"masonry");this.resizeHandler&&(c=a,d=this.resizeHandler,c.removeEventListener?c.removeEventListener("resize",d,!1):c.detachEvent&&(c.detachEvent("onresize",c["resize"+d]),c["resize"+d]=null,c["eresize"+d]=null))}};b.getWH=d;a.Masonry=b})(window);
